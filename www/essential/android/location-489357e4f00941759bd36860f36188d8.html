<!doctype html>
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="referrer" content="always">

  <meta name="twitter:card" value="summary">
  <meta name="twitter:site" content="@kjk">
  <meta name="twitter:title" content="Location">
  
  <meta name="twitter:description" content="Location">
  <meta name="twitter:creator" content="@kjk">
  <meta name="twitter:image" content="/essential/android/covers/twitter/Android.png">
  
  <meta property="og:title" content="Location">
  <meta property="og:type" content="article" />
  <meta property="og:url" content="/essential/android/location-489357e4f00941759bd36860f36188d8" />
  
  <meta property="og:description" content="Location">
  <meta property="og:image" content="/essential/android/covers/twitter/Android.png">

  <title>Location / Location / Essential Android</title>
  <meta name="description" content="Location / Location / Essential Android">
  <link rel="icon" href="/s/favicon.ico">
  <link href="/s/main.css" rel="stylesheet">
  <link href="/s/bundle.css" rel="stylesheet">
  <script src="/s/app-android.js" defer></script>
  <script src="/s/bundle.js" defer></script>
</head>

<body class="page">
  <script>
  function onLoad() {
    gBookTitle = "Essential Android";

    httpsMaybeRedirect();

    let opts = {
      target: document.getElementById("toc"),
      props: {
        parentIdx: -1,
        level: 0,
      },
    };
    new app.toc(opts);

    opts = {
      target: document.getElementById("search-parent"),
      props: {
        bookTitle: gBookTitle,
      },
    };
    new app.searchInput(opts);

    opts = {
      target: document.getElementById("page-toc"),
    };
    new app.pageToc(opts);

    opts = {
      target: document.getElementById("book-toc"),
    };
    new app.bookToc(opts);
  }
  document.addEventListener('DOMContentLoaded', onLoad);
</script>
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none">
  <symbol id="arrow-expanded" viewbox="0 0 16 16">
    <path fill="%23646465" d="M11 10H5.344L11 4.414V10z" />
  </symbol>

  <symbol id="arrow-not-expanded" viewbox="0 0 16 16">
    <path fill="%23646465" d="M6 4v8l4-4-4-4zm1 2.414L8.586 8 7 9.586V6.414z" />
  </symbol>

  <symbol id="icon-github" viewbox="0 0 496 512">
    <path
      d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z" />
  </symbol>

  <symbol id="icon-home" viewbox="0 0 576 512">
    <path
      d="M488 312.7V456c0 13.3-10.7 24-24 24H348c-6.6 0-12-5.4-12-12V356c0-6.6-5.4-12-12-12h-72c-6.6 0-12 5.4-12 12v112c0 6.6-5.4 12-12 12H112c-13.3 0-24-10.7-24-24V312.7c0-3.6 1.6-7 4.4-9.3l188-154.8c4.4-3.6 10.8-3.6 15.3 0l188 154.8c2.7 2.3 4.3 5.7 4.3 9.3zm83.6-60.9L488 182.9V44.4c0-6.6-5.4-12-12-12h-56c-6.6 0-12 5.4-12 12V117l-89.5-73.7c-17.7-14.6-43.3-14.6-61 0L4.4 251.8c-5.1 4.2-5.8 11.8-1.6 16.9l25.5 31c4.2 5.1 11.8 5.8 16.9 1.6l235.2-193.7c4.4-3.6 10.8-3.6 15.3 0l235.2 193.7c5.1 4.2 12.7 3.5 16.9-1.6l25.5-31c4.2-5.2 3.4-12.7-1.7-16.9z" />
  </symbol>

  <symbol id="icon-twitter" viewbox="0 0 512 512">
    <path
      d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z" />
  </symbol>

  <symbol id="icon-edit" viewbox="0 0 576 512">
    <path
      d="M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z" />
  </symbol>

  <symbol id="icon-star" viewbox="0 0 576 512">
    <path
      d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z" />
  </symbol>
</svg>
  <header class="page__header">
  <div class="page__header__left">
    <a id="link-home" href="index.html">
      <svg class="icon-home">
        <use xlink:href="#icon-home"></use>
      </svg>
      &nbsp;Essential Android</a>
  </div>
  <div class="page__header__center" id="search-parent">
  </div>
  <div class="page__header__right">
  </div>
</header>

  <div id="toc"></div>

  <div class="content">
    <div class="article">
      

<div style="display: flex; justify-content: space-between">
  <h1 class="title">Location</h1>
  <a class="edit-link" style="font-size: 80%" href="https://notion.so/489357e4f00941759bd36860f36188d8" rel="nofollow"
  target="_blank">suggest change</a>
</div>


      <h2 id="52691e9b-4706-4f27-b351-7303014b7035" class="">Versions<a class="header-anchor" href="#52691e9b-4706-4f27-b351-7303014b7035" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a></h2><p>[{“Name”:“3.0.x”,“GroupName”:null},{“Name”:“3.1.x”,“GroupName”:null},{“Name”:“3.2.x”,“GroupName”:null},{“Name”:“4.0”,“GroupName”:null},{“Name”:“4.0.3”,“GroupName”:null},{“Name”:“4.1”,“GroupName”:null},{“Name”:“4.2”,“GroupName”:null},{“Name”:“4.3”,“GroupName”:null},{“Name”:“4.4”,“GroupName”:null},{“Name”:“4.4W”,“GroupName”:null},{“Name”:“5.0”,“GroupName”:null},{“Name”:“5.1”,“GroupName”:null},{“Name”:“6.0”,“GroupName”:null},{“Name”:“7.0”,“GroupName”:null},{“Name”:“7.1”,“GroupName”:null}]</p><h2 id="ed6d52b6-f31a-4977-a288-04e392b10a5b" class="">Introduction<a class="header-anchor" href="#ed6d52b6-f31a-4977-a288-04e392b10a5b" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a></h2><p>Android Location APIs are used in a wide variety of apps for different purposes such as finding user location, notifying when a user has left a general area (Geofencing), and help interpret user activity (walking, running, driving, etc).</p><p>However, Android Location APIs are not the only means of acquiring user location. The following will give examples of how to use Android’s <code>LocationManager</code> and other common location libraries.</p><h2 id="7287e9f7-1698-4fa1-87fa-58d83468ed60" class="">Remarks<a class="header-anchor" href="#7287e9f7-1698-4fa1-87fa-58d83468ed60" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a></h2><p>For building Location aware apps in Android, there are two paths:</p><ul id="7218eb07-28de-48aa-af43-2da0c2144bd6" class="bulleted-list"><li>Android’s native open source <a href="https://developer.android.com/reference/android/location/LocationManager.html"><code>LocationManager</code></a></li><li>Google’s <a href="https://developers.google.com/android/reference/com/google/android/gms/location/FusedLocationProviderApi"><code>FusedLocationProviderApi</code></a>, which is part of Google Play Services</li></ul><h1 id="0bef54a0-d868-4ff4-a03f-980715bb0f60" class="">LocationManager<a class="header-anchor" href="#0bef54a0-d868-4ff4-a03f-980715bb0f60" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a></h1><p><strong>Pros</strong></p><ul id="be323240-e9f8-4aeb-b8a9-065750805fd5" class="bulleted-list"><li>More granular control</li><li>Available in all devices</li><li>Part of the Android framework</li></ul><p><strong>Cons</strong></p><ul id="80f65bbb-c6b4-46b5-94d9-0d826c7e0378" class="bulleted-list"><li>Battery drain is an issue, if not managed properly</li><li>Requires logic to switch location providers, if the device is unable to find a location (ex. poor GPS inside a building)</li></ul><p><strong>Features</strong></p><ul id="c4989653-f699-45c4-89bb-901226017c48" class="bulleted-list"><li>NMEA Listener</li><li>GPS Status Listener</li><li>Listen to provider status changes (ex. GPS is turned off by user)</li><li>List of providers to choose location source from</li></ul><p><strong>Providers</strong></p><p><strong>GPS</strong></p><ul id="ff548e99-af85-4b02-984e-32eddb95a253" class="bulleted-list"><li>Permissions Required:</li><li><a href="https://developer.android.com/reference/android/Manifest.permission.html#ACCESS_FINE_LOCATION"><code>ACCESS_FINE_LOCATION</code></a></li><li>Accuracy: 10m - 100m</li><li>Power Requirements: HIGH</li><li>Availability: Worldwide (with clear view of the sky)</li><li><strong>NOTES</strong>:</li><li>Location updates typically come in once every second, but in situations where GPS has not been used for some time and <a href="https://en.wikipedia.org/wiki/Assisted_GPS">A-GPS</a> is unavailable, it make take several minutes for a location to be received.</li><li>In cases where clear view of the sky is obstructed, GPS points will not cluster very well (location points “jump”) and accuracy may be misleading in certain areas due to the “<a href="https://en.wikipedia.org/wiki/Street_canyon">Urban Canyon</a>” effect.</li></ul><p><strong>Network</strong></p><ul id="b7cf4707-cd66-44b3-aac2-fae004d45481" class="bulleted-list"><li>Permissions Required:</li><li><a href="https://developer.android.com/reference/android/Manifest.permission.html#ACCESS_COARSE_LOCATION"><code>ACCESS_COARSE_LOCATION</code></a> or <a href="https://developer.android.com/reference/android/Manifest.permission.html#ACCESS_FINE_LOCATION"><code>ACCESS_FINE_LOCATION</code></a></li><li>Accuracy: 100m - 1000m+</li><li>Power Requirements: LOW - MEDIUM</li><li>Availability: Within range of cell tower or wifi signal</li><li><strong>NOTES:</strong></li><li>Location updates occur less frequently than GPS</li><li>Location updates typically do not cluster well (location points “jump”) and accuracy can range depending number of different factors (number of wifi signals, signal strength, type of cell tower, etc.)</li></ul><p><strong>Passive</strong></p><ul id="61c19889-9742-4c65-b190-8384cd1dc98f" class="bulleted-list"><li>Permissions Required:</li><li><a href="https://developer.android.com/reference/android/Manifest.permission.html#ACCESS_FINE_LOCATION"><code>ACCESS_FINE_LOCATION</code></a></li><li>Accuracy: 10m - 1000m+</li><li>Power Requirements: NONE</li><li>Availability: Only when another app receives a location from either GPS or Network</li><li><strong>NOTES:</strong></li><li>Don’t rely on this to give you continuous updates. This listens passively to other apps that make location requests, and passes those locations back.</li><li>Does not return FusedLocationProviderApi generated points, only the underlying location points used to generate them.</li></ul><hr id="9898dd2f-c6aa-49fd-b0e7-ce3e6663ecdf"/><h1 id="77b072ed-d1f8-42ce-850c-dc947869657f" class="">FusedLocationProviderApi<a class="header-anchor" href="#77b072ed-d1f8-42ce-850c-dc947869657f" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a></h1><p><strong>Pros</strong></p><ul id="502ab924-f6ae-4238-801e-87df08ef92ea" class="bulleted-list"><li>Offers less battery drain “out of the box”</li><li>Handles poor GPS well</li><li>Gets updates more regularly</li></ul><p><strong>Cons</strong></p><ul id="8b037775-2db5-41e3-aa5f-f1fc38507479" class="bulleted-list"><li>Less granular control over GPS</li><li>May not be available on all devices or in certain countries</li><li>Requires third party library dependency</li></ul><p><strong>Features</strong></p><ul id="83f44ed0-95c5-4461-930e-75b12de27771" class="bulleted-list"><li>Well managed use of location providers for optimal batter savings</li><li>Typically generates more accurate points then Network Location Provider</li><li>More frequent updates of library, allowing for more improvement</li><li>No need to specify what type of provider to use</li></ul><p><strong>LocationRequest Priority Levels</strong></p><p><strong>PRIORITY_HIGH_ACCURACY</strong></p><ul id="262d585c-6819-4abf-926c-f4cac43acc9e" class="bulleted-list"><li>Permissions Required:</li><li><a href="https://developer.android.com/reference/android/Manifest.permission.html#ACCESS_FINE_LOCATION"><code>ACCESS_FINE_LOCATION</code></a> for more accurate location or <a href="https://developer.android.com/reference/android/Manifest.permission.html#ACCESS_COARSE_LOCATION"><code>ACCESS_COARSE_LOCATION</code></a> for less accurate location</li><li>Accuracy: 10m - 100m</li><li>Power Requirements: HIGH</li><li>Availability: Wherever Google Play Services is available.</li><li><strong>NOTES:</strong></li><li>If <a href="https://developer.android.com/reference/android/Manifest.permission.html#ACCESS_FINE_LOCATION"><code>ACCESS_FINE_LOCATION</code></a> is not used, this will not use GPS for generating location updates, but will still find a fairly accurate point in the right conditions.</li><li>If <a href="https://developer.android.com/reference/android/Manifest.permission.html#ACCESS_FINE_LOCATION"><code>ACCESS_FINE_LOCATION</code></a> is used, it may or may not use GPS to generate location points, depending on how accurate it can currently track the device given the environmental conditions.</li><li>Although this may report more accurate location updates than the other settings, it is still prone to the “<a href="https://en.wikipedia.org/wiki/Street_canyon">Urban Canyon</a>” effect.</li></ul><p><strong>PRIORITY_BALANCED_POWER_ACCURACY</strong></p><ul id="d9984acd-a99a-4d3d-8748-4485a6d8f1c9" class="bulleted-list"><li>Permissions Required:</li><li><a href="https://developer.android.com/reference/android/Manifest.permission.html#ACCESS_FINE_LOCATION"><code>ACCESS_FINE_LOCATION</code></a> for more accurate location or <a href="https://developer.android.com/reference/android/Manifest.permission.html#ACCESS_COARSE_LOCATION"><code>ACCESS_COARSE_LOCATION</code></a> for less accurate location</li><li>Accuracy: 100m - 1000m+</li><li>Power Requirements: MEDIUM</li><li>Availability: Wherever Google Play Services is available.</li><li><strong>NOTES:</strong></li><li>Same notes as <code>PRIORITY_HIGH_ACCURACY</code></li><li>Although it is unlikely, this setting may still use GPS to generate a location.</li></ul><p><strong>PRIORITY_LOW_POWER</strong></p><ul id="55a3c899-66ac-4ba3-a222-a4b43be469e3" class="bulleted-list"><li>Permissions Required:</li><li><a href="https://developer.android.com/reference/android/Manifest.permission.html#ACCESS_FINE_LOCATION"><code>ACCESS_FINE_LOCATION</code></a> or <a href="https://developer.android.com/reference/android/Manifest.permission.html#ACCESS_COARSE_LOCATION"><code>ACCESS_COARSE_LOCATION</code></a></li><li>Accuracy: 100m - 1000m+</li><li>Power Requirements: LOW</li><li>Availability: Wherever Google Play Services is available.</li><li><strong>NOTES:</strong></li><li>Probably does not use GPS, but untested thus far.</li><li>Updates are typically not very accurate</li><li>Used generally to detect significant changes in location</li></ul><p><strong>PRIORITY_NO_POWER</strong></p><ul id="6443727a-e916-48f5-99f6-633a71e5404a" class="bulleted-list"><li>Permissions Required:</li><li><a href="https://developer.android.com/reference/android/Manifest.permission.html#ACCESS_FINE_LOCATION"><code>ACCESS_FINE_LOCATION</code></a> or <a href="https://developer.android.com/reference/android/Manifest.permission.html#ACCESS_COARSE_LOCATION"><code>ACCESS_COARSE_LOCATION</code></a></li><li>Accuracy: 10m - 1000m+</li><li>Power Requirements: NONE</li><li>Availability: Wherever Google Play Services is available.</li><li><strong>NOTES:</strong></li><li>Functions almost identically to <code>LocationManager</code> <code>PASSIVE_PROVIDER</code></li><li>Reports back Google Play Services updates when received, where <code>PASSIVE_PROVIDER</code> reports back underlying location updates used</li></ul><h1 id="e0b36f37-3414-4cc3-9c5b-fbeac03dcd89" class="">TroubleShooting<a class="header-anchor" href="#e0b36f37-3414-4cc3-9c5b-fbeac03dcd89" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a></h1><p><strong>OnLocationChanged() Never Called</strong></p><p>Since this seems to be a common issue with getting Android Locations, I’ll put down a quick checklist of common fixes:</p><hr id="0d13d0b9-c7a1-4e59-af41-fbd72c1a66a6"/><ol id="d203ceb0-6ef0-4b89-bce9-0034c02fd1b8" class="numbered-list" start="1"><li>Check your manifest!</li></ol><p>One of the most common issues is that the right permissions were never given. If you are using GPS (with or without Network), use <code>&lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot;/&gt;</code>, else use <code>&lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot;/&gt;</code>. Google’s FusedLocationApi requires <code>ACCESS_FINE_LOCATION</code>.</p><hr id="83b63fd7-1bf2-483b-a7b7-4194aa200822"/><ol id="c76b34cc-c395-4ba6-96c0-4e544a3a8144" class="numbered-list" start="1"><li>(For Android 6+) <a href="https://developer.android.com/training/permissions/requesting.html">Check runtime permissions</a>!</li></ol><p>Check for and request permissions! If you are never given permissions, you’ll end up with crashes, or worse (if you are catching all exceptions), you’ll end up with no indication of anything! It doesn’t matter if the user grants you permission at the start of the app, always check to see if you have permissions for all calls. The user can easily go to their settings and revoke them.</p><hr id="24872f07-3f0f-41aa-924f-5a587790a26a"/><ol id="9551ade6-be81-4295-a33f-b4686326d590" class="numbered-list" start="1"><li>Double check your code!</li></ol><p>Are you sure you are passing in the right listener? Did you add that <code>BroadcastReceiver</code> or <code>IntentService</code> to your manifest? Are you using <code>PendingIntent.getService()</code> on a <code>BroadcastReceiver</code> class, or <code>getBroadcast()</code> on an <code>IntentService</code> class? Are you sure you are not unregistering your listener somewhere else in your code immediately after requesting?</p><hr id="01e143bf-2dca-4240-a384-b45b3afcf699"/><ol id="9e848ff3-df15-48f0-a88d-dda8b2b2aea6" class="numbered-list" start="1"><li>Check device settings!</li></ol>
<div class="code-box lang-Plain Text">
	<div>
	<pre class="chroma">Obviously, make sure you have location services turned on.

[![enter image description here][8]][8]

If you are using Network services, did you turn on &#34;Scanning Always Available&#34;? Do you have your location mode set to &#34;Best&#34; (&#34;High Accuracy&#34;) or &#34;Battery Saving&#34; (&#34;Network Only&#34;)?

[![enter image description here][9]][9]

If you are using GPS, did you turn on &#34;Best&#34; (&#34;High Accuracy&#34;) or &#34;Device only&#34; in location mode?

[![enter image description here][10]][10]</pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><hr id="31f54e3d-71a5-486f-94a5-f31e2a15d4d2"/><ol id="eb0c1836-0475-4579-8eeb-e9647d4f69fb" class="numbered-list" start="1"><li>Double check your code!</li></ol><p>Yes, this is on here twice. Did you try using a <code>LocationListener</code> instead of a <code>PendingIntent</code>, or vice-versa, to ensure you actually implemented <code>LocationManager</code> properly? Are you sure that the location request isn’t being removed in some part of the Activity or Service lifecycle that you didn’t expect to happen?</p><hr id="07d64d5e-e3c5-4469-b5af-077ef4e5c611"/><ol id="43bebc79-2810-4073-9bc9-258e3e774e9e" class="numbered-list" start="1"><li>Check your surroundings!</li></ol><p>Are you testing GPS on the first floor of a building in the middle of San Francisco? Are you testing Network locations in the middle of nowhere? Do you work in a secret underground bunker void of all radio signals, wondering why your device isn’t getting location? Always double check your surroundings when trying to troubleshoot location problems!</p><hr id="6faba618-e678-4dc2-9d2f-6715052bac80"/><p>There could be many other less obvious reasons why location isn’t working, but before searching out those esoteric fixes, just run through this quick checklist.</p>

      <div class="forum-link">
  Found a mistake? Have a question or improvement idea?
  <a href="#" onclick="showContact(); return false;">Let me know</a>.
</div>

      <form id="contact-form" action="https://formsubmit.co/kkowalczyk@gmail.com" method="POST">
  <p>
    <div class="contact-light">Feedback about page:</div>
    <input type="text" name="page-url" id="contact-page-url" readonly />
  </p>

  <p>
    <div class="contact-light">Feedback:</div>
    <textarea name="message" id="msg-for-chris"></textarea>
    <div class="contact-light">Optional: your email if you want me to get back to you: </div>
    <input type="email" name="email" />
    <input type="text" name="_honey" style="display:none">
  </p>

  <p>
    <button type="submit" class="contact-btn">
      Send Feedback
    </button>

    <button class="contact-btn" style="float: right;" onclick="hideContact(); return false;">
      Cancel
    </button>
  </p>

  <p>
    <div data-netlify-recaptcha></div>
  </p>
</form>


      <hr class="article-bottom-sep">
    </div>

    <div id="page-toc"></div>

    <div id="chapter-toc-wrapper">
      <hr />
      <div class="hdr">Table Of Contents</div>
      <div id="book-toc"></div>
    </div>
  </div>

  <footer class="page__footer">
  <div class="page__footer__left">
    Maintained by
    <a href="https://blog.kowalczyk.info" target="_blank">Krzysztof Kowalczyk</a>
  </div>
  <div class="share-me">
    <a href="https://twitter.com/intent/tweet?text=%22Essential%20Android%22%20-%20a%20free%20programming%20book&url=%2fessential%2fandroid%2f&via=kjk">Share
      <b>Essential Android</b> on&nbsp;
      <svg class="icon-twitter">
        <use xlink:href="#icon-twitter"></use>
      </svg>
    </a>
  </div>
  <div class="page__footer__right">
    
  </div>
</footer>

  

</body>

</html>