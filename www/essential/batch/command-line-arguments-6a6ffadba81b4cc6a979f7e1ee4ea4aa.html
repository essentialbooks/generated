<!doctype html>
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="referrer" content="always">

  <meta name="twitter:card" value="summary">
  <meta name="twitter:site" content="@kjk">
  <meta name="twitter:title" content="Command-line arguments">
  
  <meta name="twitter:description" content="Command-line arguments">
  <meta name="twitter:creator" content="@kjk">
  <meta name="twitter:image" content="/essential/batch/covers/twitter/Batch.png">
  
  <meta property="og:title" content="Command-line arguments">
  <meta property="og:type" content="article" />
  <meta property="og:url" content="/essential/batch/command-line-arguments-6a6ffadba81b4cc6a979f7e1ee4ea4aa" />
  
  <meta property="og:description" content="Command-line arguments">
  <meta property="og:image" content="/essential/batch/covers/twitter/Batch.png">

  <title>Essential Batch / Command-line arguments</title>
  <meta name="description" content="Essential Batch / Command-line arguments">
  <link rel="icon" href="/s/favicon.ico">
  <link href="/s/main.css" rel="stylesheet">
  <link href="/s/bundle.css" rel="stylesheet">
  <script src="/s/app-batch.js" defer></script>
  <script src="/s/bundle.js" defer></script>
</head>

<body class="page">
  <script>
  function onLoad() {
    gBookTitle = "Essential Batch";

    httpsMaybeRedirect();

    let opts = {
      target: document.getElementById("toc"),
      props: {
        parentIdx: -1,
        level: 0,
      },
    };
    new app.toc(opts);

    opts = {
      target: document.getElementById("search-parent"),
      props: {
        bookTitle: gBookTitle,
      },
    };
    new app.searchInput(opts);

    opts = {
      target: document.getElementById("page-toc"),
    };
    new app.pageToc(opts);

    opts = {
      target: document.getElementById("book-toc"),
    };
    new app.bookToc(opts);
  }
  document.addEventListener('DOMContentLoaded', onLoad);
</script>
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none">
  <symbol id="arrow-expanded" viewbox="0 0 16 16">
    <path fill="%23646465" d="M11 10H5.344L11 4.414V10z" />
  </symbol>

  <symbol id="arrow-not-expanded" viewbox="0 0 16 16">
    <path fill="%23646465" d="M6 4v8l4-4-4-4zm1 2.414L8.586 8 7 9.586V6.414z" />
  </symbol>

  <symbol id="icon-github" viewbox="0 0 496 512">
    <path
      d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z" />
  </symbol>

  <symbol id="icon-home" viewbox="0 0 576 512">
    <path
      d="M488 312.7V456c0 13.3-10.7 24-24 24H348c-6.6 0-12-5.4-12-12V356c0-6.6-5.4-12-12-12h-72c-6.6 0-12 5.4-12 12v112c0 6.6-5.4 12-12 12H112c-13.3 0-24-10.7-24-24V312.7c0-3.6 1.6-7 4.4-9.3l188-154.8c4.4-3.6 10.8-3.6 15.3 0l188 154.8c2.7 2.3 4.3 5.7 4.3 9.3zm83.6-60.9L488 182.9V44.4c0-6.6-5.4-12-12-12h-56c-6.6 0-12 5.4-12 12V117l-89.5-73.7c-17.7-14.6-43.3-14.6-61 0L4.4 251.8c-5.1 4.2-5.8 11.8-1.6 16.9l25.5 31c4.2 5.1 11.8 5.8 16.9 1.6l235.2-193.7c4.4-3.6 10.8-3.6 15.3 0l235.2 193.7c5.1 4.2 12.7 3.5 16.9-1.6l25.5-31c4.2-5.2 3.4-12.7-1.7-16.9z" />
  </symbol>

  <symbol id="icon-twitter" viewbox="0 0 512 512">
    <path
      d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z" />
  </symbol>

  <symbol id="icon-edit" viewbox="0 0 576 512">
    <path
      d="M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z" />
  </symbol>

  <symbol id="icon-star" viewbox="0 0 576 512">
    <path
      d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z" />
  </symbol>
</svg>
  <header class="page__header">
  <div class="page__header__left">
    <a id="link-home" href="index.html">
      <svg class="icon-home">
        <use xlink:href="#icon-home"></use>
      </svg>
      &nbsp;Essential Batch</a>
  </div>
  <div class="page__header__center" id="search-parent">
  </div>
  <div class="page__header__right">
  </div>
</header>

  <div id="toc"></div>

  <div class="content">
    <div class="article">
      

<div style="display: flex; justify-content: space-between">
  <h1 class="title">Command-line arguments</h1>
  <a class="edit-link" style="font-size: 80%" href="https://notion.so/6a6ffadba81b4cc6a979f7e1ee4ea4aa" rel="nofollow"
  target="_blank">suggest change</a>
</div>


      <p>The command-line arguments AKA command-line parameters passed to a batch script are accessible as <code>%1</code>, <code>%2</code>, ..., <code>%9</code>. There can be more than nine arguments; to access them, see how to loop over all of them below.</p><p>The syntax <code>%0</code> does not refer to a command-line argument but rather to the name of the batch file.</p><p>Testing for whether the first command-line argument has been provided:</p>
<div class="code-box lang-Shell">
	<div>
	<pre class="chroma"><span class="k">if</span> not -%1-<span class="o">==</span>-- <span class="nb">echo</span> Argument one provided
<span class="k">if</span> -%1-<span class="o">==</span>-- <span class="nb">echo</span> Argument one not provided <span class="p">&amp;</span> <span class="nb">exit</span> /b</pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p>A robust looping over all command-line arguments using <code>SHIFT</code> (for each command-line argument, ...):</p>
<div class="code-box lang-Shell">
	<div>
	<pre class="chroma">:argactionstart
<span class="k">if</span> -%1-<span class="o">==</span>-- goto argactionend
<span class="nb">echo</span> %1 <span class="p">&amp;</span> REM Or <span class="k">do</span> any other thing with the argument
<span class="nb">shift</span>
goto argactionstart
:argactionend</pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p>A robust looping over all command-line arguments using <code>SHIFT</code> without modifying <code>%1</code>, <code>%2</code>, etc.:</p>
<div class="code-box lang-Shell">
	<div>
	<pre class="chroma">call :argactionstart %*
<span class="nb">echo</span> Arg one: %1 <span class="p">&amp;</span> REM %1, %2, etc. are unmodified in this location
<span class="nb">exit</span> /b

:argactionstart
<span class="k">if</span> -%1-<span class="o">==</span>-- goto argactionend
<span class="nb">echo</span> %1 <span class="p">&amp;</span> REM Or <span class="k">do</span> any other thing with the argument
<span class="nb">shift</span>
goto argactionstart
:argactionend
<span class="nb">exit</span> /b</pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p>Transferring command-line arguments to environment variables:</p>
<div class="code-box lang-Shell">
	<div>
	<pre class="chroma">setlocal EnableDelayedExpansion
REM Prevent affecting possible callers of the batch
REM Without delayed expansion, !arg%argno%! used below won<span class="err">&#39;</span>t work.
<span class="nb">set</span> <span class="nv">argcount</span><span class="o">=</span><span class="m">0</span>
:argactionstart
<span class="k">if</span> -%1-<span class="o">==</span>-- goto argactionend
<span class="nb">set</span> /a <span class="nv">argcount</span><span class="o">+=</span><span class="m">1</span>
<span class="nb">set</span> arg%argcount%<span class="o">=</span>%1
<span class="nb">shift</span>
goto argactionstart
:argactionend

<span class="nb">set</span> <span class="nv">argno</span><span class="o">=</span><span class="m">0</span>
:loopstart
<span class="nb">set</span> /a <span class="nv">argno</span><span class="o">+=</span><span class="m">1</span>
<span class="k">if</span> %argno% gtr %argcount% goto loopend
<span class="nb">echo</span> !arg%argno%! <span class="p">&amp;</span> REM Or <span class="k">do</span> any other thing with the argument
goto loopstart
:loopend</pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p>Looping over all command-line arguments, albeit not a robust one:</p>
<div class="code-box lang-Shell">
	<div>
	<pre class="chroma"><span class="k">for</span> %%i in <span class="o">(</span>%*<span class="o">)</span> <span class="k">do</span> <span class="o">(</span>
  <span class="nb">echo</span> %%i
<span class="o">)</span></pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p>This looks elegant but is non-robust, maltreating arguments containing wildcards (<code>*</code>, <code>?</code>). In particular, the above for command replaces arguments that contain wildcards (<code>*</code>, <code>?</code>) with file names that match them, or drops them if no files match. Nonetheless, the above loop works as expected as long as the passed arguments do not contain wildcards.</p><p>Finding the number of command-line arguments, in a non-robust way:</p>
<div class="code-box lang-Shell">
	<div>
	<pre class="chroma"><span class="nb">set</span> <span class="nv">argcount</span><span class="o">=</span><span class="m">0</span>
<span class="k">for</span> %%i in <span class="o">(</span>%*<span class="o">)</span> <span class="k">do</span> <span class="nb">set</span> /a <span class="nv">argcount</span><span class="o">+=</span><span class="m">1</span></pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p></p><p>Again, this does not work with arguments containing wildcards.</p><p>The maximum possible number of arguments is greater than 4000, as empirically determined on a Windows Vista machine. The number can differ on Windows XP and Windows 7.</p><p>In passing arguments to a batch script, characters used for argument separation are the following ones:</p><ul id="01fea828-b1d2-4694-83df-02ec7ae227d3" class="bulleted-list"><li>space</li><li>comma</li><li>semicolon</li><li>equal sign</li><li>tab character</li></ul><p>Thus, the following lines pass the same four arguments:</p><ul id="131cc76c-6461-4e83-bea7-d40d42519d2c" class="bulleted-list"><li><code>test.bat a b c d</code></li><li><code>test.bat a,b,c,d</code></li><li><code>test.bat a, b, c, d</code></li><li><code>test.bat a;b;c;d</code></li><li><code>test.bat a=b=c=d</code></li><li><code>test.bat a b,c;,;=d</code></li></ul><p>Yes, even the line with <code>a b,c;,;=d</code> passes four arguments, since a sequence of separating characters is considered a single separator.</p><p>To have a space, comma or semicolon in the argument value, you can pass the value enclosed in quotation marks. However, the quotation marks become part of the argument value. To get rid of the enclosing quotation marks when referring to the argument in the script, you can use <code>%~&lt;number&gt;</code> described in <a href="/percent-tilde-f4263820c2db41e399c77259970464f1">percent tilde</a>.</p><p>When passing arguments to an invoked command rather than a batch script, you usually need to separate the command from the first argument using a space. However, for internal commands, that separation is not necessary if the first character after the command name is one of a couple of symbols, including <code>.\/</code>, and more:</p><ul id="c872a1fe-ac43-4e5a-bd99-9e1ff823a531" class="bulleted-list"><li><code>echo.</code><ul id="5c7d6d7a-2b63-46e3-b0cb-4d05c7618c4e" class="bulleted-list"><li>Outputs a newline.</li></ul></li><li><code>tree.</code><ul id="c0bea190-2663-471d-97e0-a99794247f60" class="bulleted-list"><li>Fails: &quot;tree.&quot; not found. tree is an external command.</li></ul></li><li><code>dir..</code><ul id="1034b2a6-974d-430a-98ba-9429c7c3ee89" class="bulleted-list"><li>Lists the content of the parent directory.</li></ul></li><li><code>cd..</code><ul id="08438c91-1ae4-4ea5-bb85-46d8c6532c85" class="bulleted-list"><li>Changes the current directory to the parent one.</li></ul></li><li><code>cd\</code><ul id="e5213af8-340b-4f5e-af94-c79420b364ec" class="bulleted-list"><li>Changes the current directory to the root one.</li></ul></li><li><code>start.</code><ul id="58778373-1fa6-4073-9b28-69a1b1fe3a74" class="bulleted-list"><li>Opens Windows Explorer from the current directory.</li></ul></li><li><code>dir/b/s</code><ul id="b0385688-ede4-4adb-ae7f-b83bff92b589" class="bulleted-list"><li>Lists directory content recursively, showing full paths.</li></ul></li></ul><p>Links:</p><ul id="0f319f8b-964b-4258-9d58-a4cb3346061a" class="bulleted-list"><li><a href="http://ss64.com/nt/syntax-args.html">Parameters / Arguments at ss64</a></li><li><a href="http://ss64.com/nt/syntax-esc.html">Escape Characters, Delimiters and Quotes at ss64</a></li><li><a href="http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/percent.mspx">Using batch parameters at Microsoft</a></li></ul>

      <div class="forum-link">
  Found a mistake? Have a question or improvement idea?
  <a href="#" onclick="showContact(); return false;">Let me know</a>.
</div>

      <form id="contact-form" action="https://formsubmit.co/kkowalczyk@gmail.com" method="POST">
  <p>
    <div class="contact-light">Feedback about page:</div>
    <input type="text" name="page-url" id="contact-page-url" readonly />
  </p>

  <p>
    <div class="contact-light">Feedback:</div>
    <textarea name="message" id="msg-for-chris"></textarea>
    <div class="contact-light">Optional: your email if you want me to get back to you: </div>
    <input type="email" name="email" />
    <input type="text" name="_honey" style="display:none">
  </p>

  <p>
    <button type="submit" class="contact-btn">
      Send Feedback
    </button>

    <button class="contact-btn" style="float: right;" onclick="hideContact(); return false;">
      Cancel
    </button>
  </p>

  <p>
    <div data-netlify-recaptcha></div>
  </p>
</form>


      <hr class="article-bottom-sep">
    </div>

    <div id="page-toc"></div>

    <div id="chapter-toc-wrapper">
      <hr />
      <div class="hdr">Table Of Contents</div>
      <div id="book-toc"></div>
    </div>
  </div>

  <footer class="page__footer">
  <div class="page__footer__left">
    Maintained by
    <a href="https://blog.kowalczyk.info" target="_blank">Krzysztof Kowalczyk</a>
  </div>
  <div class="share-me">
    <a href="https://twitter.com/intent/tweet?text=%22Essential%20Batch%22%20-%20a%20free%20programming%20book&url=%2fessential%2fbatch%2f&via=kjk">Share
      <b>Essential Batch</b> on&nbsp;
      <svg class="icon-twitter">
        <use xlink:href="#icon-twitter"></use>
      </svg>
    </a>
  </div>
  <div class="page__footer__right">
    
  </div>
</footer>

  

</body>

</html>