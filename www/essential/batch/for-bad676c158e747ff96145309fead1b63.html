<!doctype html>
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="referrer" content="always">

  <meta name="twitter:card" value="summary">
  <meta name="twitter:site" content="@kjk">
  <meta name="twitter:title" content="FOR">
  
  <meta name="twitter:description" content="FOR">
  <meta name="twitter:creator" content="@kjk">
  <meta name="twitter:image" content="/essential/batch/covers/twitter/Batch.png">
  
  <meta property="og:title" content="FOR">
  <meta property="og:type" content="article" />
  <meta property="og:url" content="/essential/batch/for-bad676c158e747ff96145309fead1b63" />
  
  <meta property="og:description" content="FOR">
  <meta property="og:image" content="/essential/batch/covers/twitter/Batch.png">

  <title>Built-in commands / FOR / Essential Batch</title>
  <meta name="description" content="Built-in commands / FOR / Essential Batch">

  <link rel="icon" href="s/favicon-9dfe2f70.ico">

  <link href="s/main-65ff0b86.css" rel="stylesheet">
  <link href="s/bundle-83cf4538.css" rel="stylesheet">

  
  <script src="s/app-batch-7c98c53b.js" defer></script>
  <script src="s/bundle-fd6a7ad6.js" defer></script>
</head>

<body class="page">
  <script>
  function onLoad() {
    gBookTitle = "Essential Batch";

    httpsMaybeRedirect();

    let opts = {
      target: document.getElementById("toc"),
      props: {
        parentIdx: -1,
        level: 0,
      },
    };
    new app.toc(opts);

    opts = {
      target: document.getElementById("search-parent"),
      props: {
        bookTitle: gBookTitle,
      },
    };
    new app.searchInput(opts);

    opts = {
      target: document.getElementById("page-toc"),
    };
    new app.pageToc(opts);

    opts = {
      target: document.getElementById("book-toc"),
    };
    new app.bookToc(opts);
  }
  document.addEventListener('DOMContentLoaded', onLoad);
</script>
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none">
  <symbol id="arrow-expanded" viewbox="0 0 16 16">
    <path fill="%23646465" d="M11 10H5.344L11 4.414V10z" />
  </symbol>

  <symbol id="arrow-not-expanded" viewbox="0 0 16 16">
    <path fill="%23646465" d="M6 4v8l4-4-4-4zm1 2.414L8.586 8 7 9.586V6.414z" />
  </symbol>

  <symbol id="icon-github" viewbox="0 0 496 512">
    <path
      d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z" />
  </symbol>

  <symbol id="icon-home" viewbox="0 0 576 512">
    <path
      d="M488 312.7V456c0 13.3-10.7 24-24 24H348c-6.6 0-12-5.4-12-12V356c0-6.6-5.4-12-12-12h-72c-6.6 0-12 5.4-12 12v112c0 6.6-5.4 12-12 12H112c-13.3 0-24-10.7-24-24V312.7c0-3.6 1.6-7 4.4-9.3l188-154.8c4.4-3.6 10.8-3.6 15.3 0l188 154.8c2.7 2.3 4.3 5.7 4.3 9.3zm83.6-60.9L488 182.9V44.4c0-6.6-5.4-12-12-12h-56c-6.6 0-12 5.4-12 12V117l-89.5-73.7c-17.7-14.6-43.3-14.6-61 0L4.4 251.8c-5.1 4.2-5.8 11.8-1.6 16.9l25.5 31c4.2 5.1 11.8 5.8 16.9 1.6l235.2-193.7c4.4-3.6 10.8-3.6 15.3 0l235.2 193.7c5.1 4.2 12.7 3.5 16.9-1.6l25.5-31c4.2-5.2 3.4-12.7-1.7-16.9z" />
  </symbol>

  <symbol id="icon-twitter" viewbox="0 0 512 512">
    <path
      d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z" />
  </symbol>

  <symbol id="icon-edit" viewbox="0 0 576 512">
    <path
      d="M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z" />
  </symbol>

  <symbol id="icon-star" viewbox="0 0 576 512">
    <path
      d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z" />
  </symbol>
</svg>
  <header class="page__header">
  <div class="page__header__left">
    <a id="link-home" href="index.html">
      <svg class="icon-home">
        <use xlink:href="#icon-home"></use>
      </svg>
      &nbsp;Essential Batch</a>
  </div>
  <div class="page__header__center" id="search-parent">
  </div>
  <div class="page__header__right">
  </div>
</header>

  <div id="toc"></div>

  <div class="content">
    <div class="article">
      

<div style="display: flex; justify-content: space-between">
  <h1 class="title">FOR</h1>
  <a class="edit-link" style="font-size: 80%" href="https://notion.so/bad676c158e747ff96145309fead1b63" rel="nofollow"
  target="_blank">suggest change</a>
</div>


      <p>Iterates over a series of values, executing a command.</p><p>In the following examples, <code>%i</code> is to be used from the command line while <code>%%i</code> is to be used from a batch. The index (e.g., <code>%i</code>) must be a single character variable name.</p><p>Examples:</p><ul id="af6fc96c-16b1-4f0b-ac0e-a89e443e14e6" class="bulleted-list"><li><code>for %%i in (1,2,3) do echo %%i</code><p>In a batch, echoes 1, 2, and 3. In a batch, the command must use a double percent sign.</p><p>The remaining examples are intended to be directly pasted into a command line, so they use a single percent sign and include <code>@</code> to prevent repetitive display.</p></li><li><code>for %i in (1,2,3) do @echo %i</code><p>From a command line, echoes 1, 2, and 3.</p><p>The for command tries to interpret the items as file names and as patterns of file names containing wildcards.</p><p>It does not complain if the items do not match existing file names, though.</p></li><li><code>for %i in (1,2,a*d*c*e*t) do @echo %i</code><p>Unless you happen to have a file matching the third pattern, echoes 1 and 2, discarding the third item.</p></li><li><code>for %i in (1 2,3;4) do @echo %i</code><p>Echoes 1, 2, 3, and 4. Yes, a mixture of item separators is used.</p></li><li><code>for %i in (*.txt) do @echo %i</code><p>Echoes file names of files located in the current folder and having the <code>.txt</code> extension.</p></li><li><code>for %i in (&quot;C:\Windows\system32\*.exe&quot;) do @echo %i</code><p>Echoes file names matching the pattern.</p></li><li><code>for /r %i in (*.txt) do @echo %i</code><p>Echoes file names with full paths, of files having the extension <code>.txt</code> located anywhere in the current folder including nested folders.</p></li><li><code>for /d %i in (*) do @echo %i</code><p>Echoes the names of all folders in the current folder.</p></li><li><code>for /r /d %i in (*) do @echo %i</code><p>Echoes the names including full paths of all folders in the current folder, including nested folders.</p></li><li><code>for /r %i in (*) do @if %~zi geq 1000000 echo %~zi %i</code><p>For each file in the current folder and its sub-folders that has the size greater than or equal to 1,000,000 bytes, outputs the file size in bytes and the full path of the file. For the syntax in <code>%~zi</code>, see <a href="/percent-tilde-f4263820c2db41e399c77259970464f1">percent tilde</a>.</p></li><li><code>for /l %i in (1,1,10) do @echo %i</code><p>Echoes the numbers from 1 to 10.</p></li><li><code>for /f &quot;tokens=*&quot; %i in (list.txt) do @echo %i</code><ul id="80825a52-6e1e-4c67-af45-61c2225747fc" class="bulleted-list"><li>For each line in a file, echoes the line.</li></ul></li><li><code>for /f &quot;tokens=*&quot; %i in (list1.txt list2.txt) do @echo %i</code><ul id="3da8c2e0-715f-46b9-b950-54b331d10b7e" class="bulleted-list"><li>For each line in the files, echoes the line.</li></ul></li><li><code>for /f &quot;tokens=*&quot; %i in (*.txt) do @echo %i</code><ul id="1428465b-3b82-4443-877d-ab3c7c96aafe" class="bulleted-list"><li>Does nothing. Does not accept wildcards to match file names.</li></ul></li><li><code>for /f &quot;tokens=1-3 delims=:&quot; %a in (&quot;First:Second::Third&quot;) do @echo %c-%b-%a</code><ul id="cf0f106b-ad0f-4397-9ff7-24d3803bbc5a" class="bulleted-list"><li>Parses a string into tokens delimited by <code>:</code>.</li><li>The quotation marks indicate the string is not a file name.</li><li>The second and third tokens are stored in <code>%b</code> and <code>%c</code> even though <code>%b</code> and <code>%c</code> are not expressly mentioned in the part of the command before &quot;do&quot;.</li><li>The two consecutive colons are treated as one separator; <code>%c</code> is not &quot;&quot; but rather &quot;Third&quot;.</li><li>Does some of the job of the cut command from other operating systems.</li></ul></li><li><code>for /f &quot;tokens=1-3* delims=:&quot; %a in (&quot;First:Second::Third:Fourth:Fifth&quot;) do @echo %c-%b-%a: %d</code><ul id="a19bfaca-ff85-4a80-a985-42756da3a248" class="bulleted-list"><li>As above, just that the 4th and 5th items get captured in <code>%d</code> as &quot;Fourth:Fifth&quot;, including the separator.</li></ul></li><li><code>for /f &quot;tokens=1-3* delims=:,&quot; %a in (&quot;First,Second,:Third:Fourth:Fifth&quot;) do @echo %c-%b-%a: %d</code><ul id="ef7910c8-2ab5-463b-a2f5-0b574086d75d" class="bulleted-list"><li>Multiple delimiters are possible.</li></ul></li><li><code>for /f &quot;tokens=1-3&quot; %a in (&quot;First Second Third,item&quot;) do @echo %c-%b-%a</code><ul id="fe367b69-aa32-488a-b715-80b235d12737" class="bulleted-list"><li>The default delimiters are space and tab. Thus, they differ from the separators used to separate arguments passed to a batch.</li></ul></li><li><code>for /f &quot;tokens=*&quot; %i in (&#x27;cd&#x27;) do @echo %i</code><ul id="e238f70a-c090-496f-a10a-f64a73e3cab9" class="bulleted-list"><li>For each line of the result of a command, echoes the line.</li></ul></li><li><code>for /f &quot;tokens=*&quot; %i in (&#x27;dir /b /a-d-h&#x27;) do @echo %~nxai</code><ul id="cd96aaf8-5056-42c3-b475-4a3c42f7f3b6" class="bulleted-list"><li>For each non-hidden file in the current folder, displays the file attributes followed by the file name. In the string <code>%~nxai</code>, uses the syntax described at <a href="/percent-tilde-f4263820c2db41e399c77259970464f1">percent tilde</a>.</li></ul></li><li><code>for /f &quot;usebackq tokens=*&quot; %i in (`dir /b /a-d-h`) do @echo %~nxai</code><ul id="725bceb0-9362-4882-a742-98f8cecad899" class="bulleted-list"><li>As above, but using the back-quote character (<code>`</code>) around the command to be executed.</li></ul></li><li><code>for /f &quot;tokens=*&quot; %i in (&#x27;tasklist ^| sort ^&amp; echo End&#x27;) do @echo %i</code><ul id="015428a0-d8c4-424b-ba52-ae40f137ee63" class="bulleted-list"><li>Pipes and ampersands in the command to be executed must be escaped using caret (<code>^</code>).</li></ul></li><li><code>(for %i in (1,2,3) do @echo %i) &gt; anyoldtemp.txt</code><ul id="72910f09-3d39-48ca-b721-785dfd573817" class="bulleted-list"><li>To redirect the entire result of a for loop, place the entire loop inside brackets before redirecting. Otherwise, the redirection will tie to the body of the loop, so each new iteration of the body of the loop will override the results of the previous iterations.</li></ul></li><li><code>for %i in (1,2,3) do @echo %i &gt; anyoldtemp.txt</code><ul id="dade93c3-be18-4a53-bacb-dd80ee3af917" class="bulleted-list"><li>An example related to the one above. It shows the consequence of failing to put the loop inside brackets.</li></ul></li></ul><p>Continue: To jump to the next iteration of the loop and thus emulate the continue statement known from many languages, you can use <code><a href="/goto-987419c9b64d4421bfe238f9db65d492">goto</a></code> provided you put the loop body in a subroutine, as shown in the following:</p>
<div class="code-box lang-Shell">
	<div>
	<pre class="chroma"><span class="k">for</span> %%i in <span class="o">(</span>a b c<span class="o">)</span> <span class="k">do</span> call :for_body %%i
<span class="nb">exit</span> /b

:for_body
    <span class="nb">echo</span> <span class="m">1</span> %1
    goto :cont
    <span class="nb">echo</span> <span class="m">2</span> %1
  :cont
<span class="nb">exit</span> /b</pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p>If you use <a href="/goto-987419c9b64d4421bfe238f9db65d492"><code>goto</code></a><a href="/goto-987419c9b64d4421bfe238f9db65d492"> </a>directly inside the for loop, the use of <a href="/goto-987419c9b64d4421bfe238f9db65d492"><code>goto</code></a><a href="/goto-987419c9b64d4421bfe238f9db65d492"> </a>breaks the loop bookkeeping. The following fails:</p>
<div class="code-box lang-Shell">
	<div>
	<pre class="chroma"><span class="k">for</span> %%i in <span class="o">(</span>a b c<span class="o">)</span> <span class="k">do</span> <span class="o">(</span>
    <span class="nb">echo</span> <span class="m">1</span> %%i
    goto :cont
    <span class="nb">echo</span> <span class="m">2</span> %%i
  :cont
    <span class="nb">echo</span> <span class="m">3</span> %%i
<span class="o">)</span></pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p>Links:</p><ul id="907294de-7009-4218-ab57-7b8d10d89808" class="bulleted-list"><li><a href="http://ss64.com/nt/for.html">for at ss64.com</a></li><li><a href="https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/for">for at Microsoft</a></li></ul><p></p>
<div class="code-box lang-Shell">
	<div>
	<pre class="chroma">$ <span class="k">for</span> /?
Runs a specified <span class="nb">command</span> <span class="k">for</span> each file in a <span class="nb">set</span> of files.

FOR %variable IN <span class="o">(</span><span class="nb">set</span><span class="o">)</span> DO <span class="nb">command</span> <span class="o">[</span>command-parameters<span class="o">]</span>

  %variable  Specifies a single letter replaceable parameter.
  <span class="o">(</span><span class="nb">set</span><span class="o">)</span>      Specifies a <span class="nb">set</span> of one or more files.  Wildcards may be used.
  <span class="nb">command</span>    Specifies the <span class="nb">command</span> to carry out <span class="k">for</span> each file.
  command-parameters
             Specifies parameters or switches <span class="k">for</span> the specified command.

To use the FOR <span class="nb">command</span> in a batch program, specify %%variable instead
of %variable.  Variable names are <span class="k">case</span> sensitive, so %i is different
from %I.

If Command Extensions are enabled, the following additional
forms of the FOR <span class="nb">command</span> are supported:

FOR /D %variable IN <span class="o">(</span><span class="nb">set</span><span class="o">)</span> DO <span class="nb">command</span> <span class="o">[</span>command-parameters<span class="o">]</span>

    If <span class="nb">set</span> contains wildcards, <span class="k">then</span> specifies to match against directory
    names instead of file names.

FOR /R <span class="o">[[</span>drive:<span class="o">]</span>path<span class="o">]</span> %variable IN <span class="o">(</span><span class="nb">set</span><span class="o">)</span> DO <span class="nb">command</span> <span class="o">[</span>command-parameters<span class="o">]</span>

    Walks the directory tree rooted at <span class="o">[</span>drive:<span class="o">]</span>path, executing the FOR
    statement in each directory of the tree.  If no directory
    specification is specified after /R <span class="k">then</span> the current directory is
    assumed.  If <span class="nb">set</span> is just a single period <span class="o">(</span>.<span class="o">)</span> character <span class="k">then</span> it
    will just enumerate the directory tree.

FOR /L %variable IN <span class="o">(</span>start,step,end<span class="o">)</span> DO <span class="nb">command</span> <span class="o">[</span>command-parameters<span class="o">]</span>

    The <span class="nb">set</span> is a sequence of numbers from start to end, by step amount.
    So <span class="o">(</span>1,1,5<span class="o">)</span> would generate the sequence <span class="m">1</span> <span class="m">2</span> <span class="m">3</span> <span class="m">4</span> <span class="m">5</span> and <span class="o">(</span>5,-1,1<span class="o">)</span> would
    generate the sequence <span class="o">(</span><span class="m">5</span> <span class="m">4</span> <span class="m">3</span> <span class="m">2</span> 1<span class="o">)</span>

FOR /F <span class="o">[</span><span class="s2">&#34;options&#34;</span><span class="o">]</span> %variable IN <span class="o">(</span>file-set<span class="o">)</span> DO <span class="nb">command</span> <span class="o">[</span>command-parameters<span class="o">]</span>
FOR /F <span class="o">[</span><span class="s2">&#34;options&#34;</span><span class="o">]</span> %variable IN <span class="o">(</span><span class="s2">&#34;string&#34;</span><span class="o">)</span> DO <span class="nb">command</span> <span class="o">[</span>command-parameters<span class="o">]</span>
FOR /F <span class="o">[</span><span class="s2">&#34;options&#34;</span><span class="o">]</span> %variable IN <span class="o">(</span><span class="s1">&#39;command&#39;</span><span class="o">)</span> DO <span class="nb">command</span> <span class="o">[</span>command-parameters<span class="o">]</span>

    or, <span class="k">if</span> usebackq option present:

FOR /F <span class="o">[</span><span class="s2">&#34;options&#34;</span><span class="o">]</span> %variable IN <span class="o">(</span>file-set<span class="o">)</span> DO <span class="nb">command</span> <span class="o">[</span>command-parameters<span class="o">]</span>
FOR /F <span class="o">[</span><span class="s2">&#34;options&#34;</span><span class="o">]</span> %variable IN <span class="o">(</span><span class="s1">&#39;string&#39;</span><span class="o">)</span> DO <span class="nb">command</span> <span class="o">[</span>command-parameters<span class="o">]</span>
FOR /F <span class="o">[</span><span class="s2">&#34;options&#34;</span><span class="o">]</span> %variable IN <span class="o">(</span><span class="sb">`</span><span class="nb">command</span><span class="sb">`</span><span class="o">)</span> DO <span class="nb">command</span> <span class="o">[</span>command-parameters<span class="o">]</span>

    file-set is one or more file names.  Each file is opened, <span class="nb">read</span>
    and processed before going on to the next file in file-set.
    Processing consists of reading in the file, breaking it up into
    individual lines of text and <span class="k">then</span> parsing each line into zero or
    more tokens.  The body of the <span class="k">for</span> loop is <span class="k">then</span> called with the
    variable value<span class="o">(</span>s<span class="o">)</span> <span class="nb">set</span> to the found token string<span class="o">(</span>s<span class="o">)</span>.  By default, /F
    passes the first blank separated token from each line of each file.
    Blank lines are skipped.  You can override the default parsing
    behavior by specifying the optional <span class="s2">&#34;options&#34;</span> parameter.  This
    is a quoted string which contains one or more keywords to specify
    different parsing options.  The keywords are:

        <span class="nv">eol</span><span class="o">=</span>c           - specifies an end of line comment character
                          <span class="o">(</span>just one<span class="o">)</span>
        <span class="nv">skip</span><span class="o">=</span>n          - specifies the number of lines to skip at the
                          beginning of the file.
        <span class="nv">delims</span><span class="o">=</span>xxx      - specifies a delimiter set.  This replaces the
                          default delimiter <span class="nb">set</span> of space and tab.
        <span class="nv">tokens</span><span class="o">=</span>x,y,m-n  - specifies which tokens from each line are to
                          be passed to the <span class="k">for</span> body <span class="k">for</span> each iteration.
                          This will cause additional variable names to
                          be allocated.  The m-n form is a range,
                          specifying the mth through the nth tokens.  If
                          the last character in the <span class="nv">tokens</span><span class="o">=</span> string is an
                          asterisk, <span class="k">then</span> an additional variable is
                          allocated and receives the remaining text on
                          the line after the last token parsed.
        usebackq        - specifies that the new semantics are in force,
                          where a back quoted string is executed as a
                          <span class="nb">command</span> and a single quoted string is a
                          literal string <span class="nb">command</span> and allows the use of
                          double quotes to quote file names in
                          file-set.

    Some examples might help:

FOR /F <span class="s2">&#34;eol=; tokens=2,3* delims=, &#34;</span> %i in <span class="o">(</span>myfile.txt<span class="o">)</span> <span class="k">do</span> @echo %i %j %k

    would parse each line in myfile.txt, ignoring lines that begin with
    a semicolon, passing the 2nd and 3rd token from each line to the <span class="k">for</span>
    body, with tokens delimited by commas and/or spaces.  Notice the <span class="k">for</span>
    body statements reference %i to get the 2nd token, %j to get the
    3rd token, and %k to get all remaining tokens after the 3rd.  For
    file names that contain spaces, you need to quote the filenames with
    double quotes.  In order to use double quotes in this manner, you also
    need to use the usebackq option, otherwise the double quotes will be
    interpreted as defining a literal string to parse.

    %i is explicitly declared in the <span class="k">for</span> statement and the %j and %k
    are implicitly declared via the <span class="nv">tokens</span><span class="o">=</span> option.  You can specify up
    to <span class="m">26</span> tokens via the <span class="nv">tokens</span><span class="o">=</span> line, provided it does not cause an
    attempt to <span class="nb">declare</span> a variable higher than the letter <span class="s1">&#39;z&#39;</span> or <span class="s1">&#39;Z&#39;</span>.
    Remember, FOR variables are single-letter, <span class="k">case</span> sensitive, global,
    and you can<span class="err">&#39;</span>t have more than <span class="m">52</span> total active at any one time.

    You can also use the FOR /F parsing logic on an immediate string, by
    making the file-set between the parenthesis a quoted string,
    using single quote characters.  It will be treated as a single line
    of input from a file and parsed.

    Finally, you can use the FOR /F <span class="nb">command</span> to parse the output of a
    command.  You <span class="k">do</span> this by making the file-set between the
    parenthesis a back quoted string.  It will be treated as a <span class="nb">command</span>
    line, which is passed to a child CMD.EXE and the output is captured
    into memory and parsed as <span class="k">if</span> it was a file.  So the following
    example:

      FOR /F <span class="s2">&#34;usebackq delims==&#34;</span> %i IN <span class="o">(</span><span class="sb">`</span><span class="nb">set</span><span class="sb">`</span><span class="o">)</span> DO @echo %i

    would enumerate the environment variable names in the current
    environment.

In addition, substitution of FOR variable references has been enhanced.
You can now use the following optional syntax:

    %~I         - expands %I removing any surrounding quotes <span class="o">(</span><span class="s2">&#34;)
</span><span class="s2">    %~fI        - expands %I to a fully qualified path name
</span><span class="s2">    %~dI        - expands %I to a drive letter only
</span><span class="s2">    %~pI        - expands %I to a path only
</span><span class="s2">    %~nI        - expands %I to a file name only
</span><span class="s2">    %~xI        - expands %I to a file extension only
</span><span class="s2">    %~sI        - expanded path contains short names only
</span><span class="s2">    %~aI        - expands %I to file attributes of file
</span><span class="s2">    %~tI        - expands %I to date/time of file
</span><span class="s2">    %~zI        - expands %I to size of file
</span><span class="s2">    %~</span><span class="nv">$PATH</span><span class="s2">:I   - searches the directories listed in the PATH
</span><span class="s2">                   environment variable and expands %I to the
</span><span class="s2">                   fully qualified name of the first one found.
</span><span class="s2">                   If the environment variable name is not
</span><span class="s2">                   defined or the file is not found by the
</span><span class="s2">                   search, then this modifier expands to the
</span><span class="s2">                   empty string
</span><span class="s2">
</span><span class="s2">The modifiers can be combined to get compound results:
</span><span class="s2">
</span><span class="s2">    %~dpI       - expands %I to a drive letter and path only
</span><span class="s2">    %~nxI       - expands %I to a file name and extension only
</span><span class="s2">    %~fsI       - expands %I to a full path name with short names only
</span><span class="s2">    %~dp</span><span class="nv">$PATH</span><span class="s2">:I - searches the directories listed in the PATH
</span><span class="s2">                   environment variable for %I and expands to the
</span><span class="s2">                   drive letter and path of the first one found.
</span><span class="s2">    %~ftzaI     - expands %I to a DIR like output line
</span><span class="s2">
</span><span class="s2">In the above examples %I and PATH can be replaced by other valid
</span><span class="s2">values.  The %~ syntax is terminated by a valid FOR variable name.
</span><span class="s2">Picking upper case variable names like %I makes it more readable and
</span><span class="s2">avoids confusion with the modifiers, which are not case sensitive.</span></pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div>

      <div class="forum-link">
  Found a mistake? Have a question or improvement idea?
  <a href="#" onclick="showContact(); return false;">Let me know</a>.
</div>

      <form id="contact-form" action="https://formsubmit.co/kkowalczyk@gmail.com" method="POST">
  <p>
    <div class="contact-light">Feedback about page:</div>
    <input type="text" name="page-url" id="contact-page-url" readonly />
  </p>

  <p>
    <div class="contact-light">Feedback:</div>
    <textarea name="message" id="msg-for-chris"></textarea>
    <div class="contact-light">Optional: your email if you want me to get back to you: </div>
    <input type="email" name="email" />
    <input type="text" name="_honey" style="display:none">
  </p>

  <p>
    <button type="submit" class="contact-btn">
      Send Feedback
    </button>

    <button class="contact-btn" style="float: right;" onclick="hideContact(); return false;">
      Cancel
    </button>
  </p>

  <p>
    <div data-netlify-recaptcha></div>
  </p>
</form>


      <hr class="article-bottom-sep">
    </div>

    <div id="page-toc"></div>

    <div id="chapter-toc-wrapper">
      <hr />
      <div class="hdr">Table Of Contents</div>
      <div id="book-toc"></div>
    </div>
  </div>

  <footer class="page__footer">
  <div class="page__footer__left">
    Maintained by
    <a href="https://blog.kowalczyk.info" target="_blank">Krzysztof Kowalczyk</a>
  </div>
  <div class="share-me">
    <a href="https://twitter.com/intent/tweet?text=%22Essential%20Batch%22%20-%20a%20free%20programming%20book&url=%2fessential%2fbatch%2f&via=kjk">Share
      <b>Essential Batch</b> on&nbsp;
      <svg class="icon-twitter">
        <use xlink:href="#icon-twitter"></use>
      </svg>
    </a>
  </div>
  <div class="page__footer__right">
    
  </div>
</footer>

  

</body>

</html>