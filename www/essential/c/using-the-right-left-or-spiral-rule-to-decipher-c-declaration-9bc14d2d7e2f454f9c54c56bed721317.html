<!doctype html>
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="referrer" content="always">

  <meta name="twitter:card" value="summary">
  <meta name="twitter:site" content="@kjk">
  <meta name="twitter:title" content="Using the right-left or spiral rule to decipher C declaration">
  
  <meta name="twitter:description" content="Using the right-left or spiral rule to decipher C declaration">
  <meta name="twitter:creator" content="@kjk">
  <meta name="twitter:image" content="/essential/c/covers/twitter/C.png">
  
  <meta property="og:title" content="Using the right-left or spiral rule to decipher C declaration">
  <meta property="og:type" content="article" />
  <meta property="og:url" content="/essential/c/using-the-right-left-or-spiral-rule-to-decipher-c-declaration-9bc14d2d7e2f454f9c54c56bed721317" />
  
  <meta property="og:description" content="Using the right-left or spiral rule to decipher C declaration">
  <meta property="og:image" content="/essential/c/covers/twitter/C.png">

  <title>Declarations / Using the right-left or spiral rule to decipher C declaration / Essential C</title>
  <meta name="description" content="Declarations / Using the right-left or spiral rule to decipher C declaration / Essential C">

  <link rel="icon" href="s/favicon-9dfe2f70.ico">

  <link href="s/main-65ff0b86.css" rel="stylesheet">
  <link href="s/bundle-83cf4538.css" rel="stylesheet">

  
  <script src="s/app-c-73a14490.js" defer></script>
  <script src="s/bundle-fd6a7ad6.js" defer></script>
</head>

<body class="page">
  <script>
  function onLoad() {
    gBookTitle = "Essential C";

    httpsMaybeRedirect();

    let opts = {
      target: document.getElementById("toc"),
      props: {
        parentIdx: -1,
        level: 0,
      },
    };
    new app.toc(opts);

    opts = {
      target: document.getElementById("search-parent"),
      props: {
        bookTitle: gBookTitle,
      },
    };
    new app.searchInput(opts);

    opts = {
      target: document.getElementById("page-toc"),
    };
    new app.pageToc(opts);

    opts = {
      target: document.getElementById("book-toc"),
    };
    new app.bookToc(opts);
  }
  document.addEventListener('DOMContentLoaded', onLoad);
</script>
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none">
  <symbol id="arrow-expanded" viewbox="0 0 16 16">
    <path fill="%23646465" d="M11 10H5.344L11 4.414V10z" />
  </symbol>

  <symbol id="arrow-not-expanded" viewbox="0 0 16 16">
    <path fill="%23646465" d="M6 4v8l4-4-4-4zm1 2.414L8.586 8 7 9.586V6.414z" />
  </symbol>

  <symbol id="icon-github" viewbox="0 0 496 512">
    <path
      d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z" />
  </symbol>

  <symbol id="icon-home" viewbox="0 0 576 512">
    <path
      d="M488 312.7V456c0 13.3-10.7 24-24 24H348c-6.6 0-12-5.4-12-12V356c0-6.6-5.4-12-12-12h-72c-6.6 0-12 5.4-12 12v112c0 6.6-5.4 12-12 12H112c-13.3 0-24-10.7-24-24V312.7c0-3.6 1.6-7 4.4-9.3l188-154.8c4.4-3.6 10.8-3.6 15.3 0l188 154.8c2.7 2.3 4.3 5.7 4.3 9.3zm83.6-60.9L488 182.9V44.4c0-6.6-5.4-12-12-12h-56c-6.6 0-12 5.4-12 12V117l-89.5-73.7c-17.7-14.6-43.3-14.6-61 0L4.4 251.8c-5.1 4.2-5.8 11.8-1.6 16.9l25.5 31c4.2 5.1 11.8 5.8 16.9 1.6l235.2-193.7c4.4-3.6 10.8-3.6 15.3 0l235.2 193.7c5.1 4.2 12.7 3.5 16.9-1.6l25.5-31c4.2-5.2 3.4-12.7-1.7-16.9z" />
  </symbol>

  <symbol id="icon-twitter" viewbox="0 0 512 512">
    <path
      d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z" />
  </symbol>

  <symbol id="icon-edit" viewbox="0 0 576 512">
    <path
      d="M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z" />
  </symbol>

  <symbol id="icon-star" viewbox="0 0 576 512">
    <path
      d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z" />
  </symbol>
</svg>
  <header class="page__header">
  <div class="page__header__left">
    <a id="link-home" href="index.html">
      <svg class="icon-home">
        <use xlink:href="#icon-home"></use>
      </svg>
      &nbsp;Essential C</a>
  </div>
  <div class="page__header__center" id="search-parent">
  </div>
  <div class="page__header__right">
  </div>
</header>

  <div id="toc"></div>

  <div class="content">
    <div class="article">
      

<div style="display: flex; justify-content: space-between">
  <h1 class="title">Using the right-left or spiral rule to decipher C declaration</h1>
  <a class="edit-link" style="font-size: 80%" href="https://notion.so/9bc14d2d7e2f454f9c54c56bed721317" rel="nofollow"
  target="_blank">suggest change</a>
</div>


      <p>The “right-left” rule is a completely regular rule for deciphering C declarations. It can also be useful in creating them.</p><p>Read the symbols as you encounter them in the declaration…</p>
<div class="code-box lang-Plain Text">
	<div>
	<pre class="chroma">*   as &#34;pointer to&#34;          - always on the left side
[]  as &#34;array of&#34;            - always on the right side
()  as &#34;function returning&#34;  - always on the right side</pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><hr id="c26486c1-d5c7-4c82-8fb4-90c96df5cf2d"/><p><strong>How to apply the rule</strong></p><p><strong>STEP 1</strong></p><p>Find the identifier. This is your starting point. Then say to yourself, “identifier is.” You’ve started your declaration.</p><p><strong>STEP 2</strong></p><p>Look at the symbols on the right of the identifier. If, say, you find <code>()</code> there, then you know that this is the declaration for a function. So you would then have <em>“identifier is function returning”</em>. Or if you found a <code>[]</code> there, you would say <em>“identifier is array of”</em>. Continue right until you run out of symbols OR hit a right parenthesis <code>\)</code>. (If you hit a left parenthesis <code>\(</code>, that’s the beginning of a <code>()</code> symbol, even if there is stuff in between the parentheses. More on that below.)</p><p><strong>STEP 3</strong></p><p>Look at the symbols to the left of the identifier. If it is not one of our symbols above (say, something like “int”), just say it. Otherwise, translate it into English using that table above. Keep going left until you run out of symbols OR hit a left parenthesis <code>\(</code>.</p><p>Now repeat steps 2 and 3 until you’ve formed your declaration.</p><hr id="a3250b48-ab53-425e-8dda-bfe9f064e928"/><p><strong>Here are some examples:</strong></p>
<div class="code-box lang-Plain Text">
	<div>
	<pre class="chroma">int *p[];</pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p>First, find identifier:</p>
<div class="code-box lang-Plain Text">
	<div>
	<pre class="chroma">int *p[];
     ^</pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p><em>“p is”</em></p><p>Now, move right until out of symbols or right parenthesis hit.</p>
<div class="code-box lang-Plain Text">
	<div>
	<pre class="chroma">int *p[];
      ^^</pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p><em>“p is array of”</em></p><p>Can’t move right anymore (out of symbols), so move left and find:</p>
<div class="code-box lang-Plain Text">
	<div>
	<pre class="chroma">int *p[];
    ^</pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p><em>“p is array of pointer to”</em></p><p>Keep going left and find:</p>
<div class="code-box lang-Plain Text">
	<div>
	<pre class="chroma">int *p[];
^^^</pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p><em>“p is array of pointer to int”.</em></p><p>(or <em>“p is an array where each element is of type pointer to int”</em>)</p><p><strong>Another example:</strong></p>
<div class="code-box lang-Plain Text">
	<div>
	<pre class="chroma">int *(*func())();</pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p>Find the identifier.</p>
<div class="code-box lang-Plain Text">
	<div>
	<pre class="chroma">int *(*func())();
       ^^^^</pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p><em>“func is”</em></p><p>Move right.</p>
<div class="code-box lang-Plain Text">
	<div>
	<pre class="chroma">int *(*func())();
           ^^</pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p><em>“func is function returning”</em></p><p>Can’t move right anymore because of the right parenthesis, so move left.</p>
<div class="code-box lang-Plain Text">
	<div>
	<pre class="chroma">int *(*func())();
      ^</pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p><em>“func is function returning pointer to”</em></p><p>Can’t move left anymore because of the left parenthesis, so keep going right.</p>
<div class="code-box lang-Plain Text">
	<div>
	<pre class="chroma">int *(*func())();
              ^^</pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p><em>“func is function returning pointer to function returning”</em></p><p>Can’t move right anymore because we’re out of symbols, so go left.</p>
<div class="code-box lang-Plain Text">
	<div>
	<pre class="chroma">int *(*func())();
    ^</pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p><em>“func is function returning pointer to function returning pointer to”</em></p><p>And finally, keep going left, because there’s nothing left on the right.</p>
<div class="code-box lang-Plain Text">
	<div>
	<pre class="chroma">int *(*func())();
^^^</pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p><em>“func is function returning pointer to function returning pointer to int”.</em></p><p>As you can see, this rule can be quite useful. You can also use it to sanity check yourself while you are creating declarations, and to give you a hint about where to put the next symbol and whether parentheses are required.</p><p>Some declarations look much more complicated than they are due to array sizes and argument lists in prototype form. If you see <code>[3]</code>, that’s read as <em>“array (size 3) of…”</em>. If you see <code>(char *,int)</code> that’s read as *“function expecting (char <em>,int) and returning…”</em>.</p><p><strong>Here’s a fun one:</strong></p>
<div class="code-box lang-Plain Text">
	<div>
	<pre class="chroma">int (*(*fun_one)(char *,double))[9][20];</pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p>I won’t go through each of the steps to decipher this one.</p><p>*“fun_one is pointer to function expecting (char <em>,double) and returning pointer to array (size 9) of array (size 20) of int.”</em></p><p>As you can see, it’s not as complicated if you get rid of the array sizes and argument lists:</p>
<div class="code-box lang-Plain Text">
	<div>
	<pre class="chroma">int (*(*fun_one)())[][];</pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p>You can decipher it that way, and then put in the array sizes and argument lists later.</p><p><strong>Some final words:</strong></p><hr id="460b3e07-9fa2-4e90-92d4-65228ea79a4f"/><p>It is quite possible to make illegal declarations using this rule, so some knowledge of what’s legal in C is necessary. For instance, if the above had been:</p>
<div class="code-box lang-Plain Text">
	<div>
	<pre class="chroma">int *((*fun_one)())[][];</pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p>it would have read <em>“fun_one is pointer to function returning array of array of pointer to int”</em>. Since a function cannot return an array, but only a pointer to an array, that declaration is illegal.</p><p>Illegal combinations include:</p>
<div class="code-box lang-Plain Text">
	<div>
	<pre class="chroma">[]() - cannot have an array of functions
()() - cannot have a function that returns a function
()[] - cannot have a function that returns an array</pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p>In all the above cases, you would need a set of parentheses to bind a <code>\*</code> symbol on the left between these <code>()</code> and <code>[]</code> right-side symbols in order for the declaration to be legal.</p><p><strong>Here are some more examples:</strong></p><hr id="39615040-012e-4fe0-b8e7-1c76ecd44213"/><p><strong>Legal</strong></p>
<div class="code-box lang-Plain Text">
	<div>
	<pre class="chroma">int i;               an int
int *p;              an int pointer (ptr to an int)
int a[];             an array of ints
int f();             a function returning an int
int **pp;            a pointer to an int pointer (ptr to a ptr to an int)
int (*pa)[];         a pointer to an array of ints
int (*pf)();         a pointer to a function returning an int
int *ap[];           an array of int pointers (array of ptrs to ints)
int aa[][];          an array of arrays of ints
int *fp();           a function returning an int pointer
int ***ppp;          a pointer to a pointer to an int pointer
int (**ppa)[];       a pointer to a pointer to an array of ints
int (**ppf)();       a pointer to a pointer to a function returning an int
int *(*pap)[];       a pointer to an array of int pointers
int (*paa)[][];      a pointer to an array of arrays of ints
int *(*pfp)();       a pointer to a function returning an int pointer
int **app[];         an array of pointers to int pointers
int (*apa[])[];      an array of pointers to arrays of ints
int (*apf[])();      an array of pointers to functions returning an int
int *aap[][];        an array of arrays of int pointers
int aaa[][][];       an array of arrays of arrays of int
int **fpp();         a function returning a pointer to an int pointer
int (*fpa())[];      a function returning a pointer to an array of ints
int (*fpf())();      a function returning a pointer to a function returning an int</pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p><strong>Illegal</strong></p>
<div class="code-box lang-Plain Text">
	<div>
	<pre class="chroma">int af[]();          an array of functions returning an int
int fa()[];          a function returning an array of ints
int ff()();          a function returning a function returning an int
int (*pfa)()[];      a pointer to a function returning an array of ints
int aaf[][]();       an array of arrays of functions returning an int
int (*paf)[]();      a pointer to a an array of functions returning an int
int (*pff)()();      a pointer to a function returning a function returning an int
int *afp[]();        an array of functions returning int pointers
int afa[]()[];       an array of functions returning an array of ints
int aff[]()();       an array of functions returning functions returning an int
int *fap()[];        a function returning an array of int pointers
int faa()[][];       a function returning an array of arrays of ints
int faf()[]();       a function returning an array of functions returning an int
int *ffp()();        a function returning a function returning an int pointer</pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p>Source: http://ieng9.ucsd.edu/~cs30x/rt_lt.rule.html</p>

      <div class="forum-link">
  Found a mistake? Have a question or improvement idea?
  <a href="#" onclick="showContact(); return false;">Let me know</a>.
</div>

      <form id="contact-form" action="https://formsubmit.co/kkowalczyk@gmail.com" method="POST">
  <p>
    <div class="contact-light">Feedback about page:</div>
    <input type="text" name="page-url" id="contact-page-url" readonly />
  </p>

  <p>
    <div class="contact-light">Feedback:</div>
    <textarea name="message" id="msg-for-chris"></textarea>
    <div class="contact-light">Optional: your email if you want me to get back to you: </div>
    <input type="email" name="email" />
    <input type="text" name="_honey" style="display:none">
  </p>

  <p>
    <button type="submit" class="contact-btn">
      Send Feedback
    </button>

    <button class="contact-btn" style="float: right;" onclick="hideContact(); return false;">
      Cancel
    </button>
  </p>

  <p>
    <div data-netlify-recaptcha></div>
  </p>
</form>


      <hr class="article-bottom-sep">
    </div>

    <div id="page-toc"></div>

    <div id="chapter-toc-wrapper">
      <hr />
      <div class="hdr">Table Of Contents</div>
      <div id="book-toc"></div>
    </div>
  </div>

  <footer class="page__footer">
  <div class="page__footer__left">
    Maintained by
    <a href="https://blog.kowalczyk.info" target="_blank">Krzysztof Kowalczyk</a>
  </div>
  <div class="share-me">
    <a href="https://twitter.com/intent/tweet?text=%22Essential%20C%22%20-%20a%20free%20programming%20book&url=%2fessential%2fc%2f&via=kjk">Share
      <b>Essential C</b> on&nbsp;
      <svg class="icon-twitter">
        <use xlink:href="#icon-twitter"></use>
      </svg>
    </a>
  </div>
  <div class="page__footer__right">
    
  </div>
</footer>

  

</body>

</html>