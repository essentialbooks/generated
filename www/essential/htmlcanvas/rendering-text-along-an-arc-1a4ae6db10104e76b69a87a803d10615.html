<!doctype html>
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="referrer" content="always">

  <meta name="twitter:card" value="summary">
  <meta name="twitter:site" content="@kjk">
  <meta name="twitter:title" content="Rendering text along an arc.">
  
  <meta name="twitter:description" content="Rendering text along an arc.">
  <meta name="twitter:creator" content="@kjk">
  <meta name="twitter:image" content="/essential/htmlcanvas/covers/twitter/HTMLCanvas.png">
  
  <meta property="og:title" content="Rendering text along an arc.">
  <meta property="og:type" content="article" />
  <meta property="og:url" content="/essential/htmlcanvas/rendering-text-along-an-arc-1a4ae6db10104e76b69a87a803d10615" />
  
  <meta property="og:description" content="Rendering text along an arc.">
  <meta property="og:image" content="/essential/htmlcanvas/covers/twitter/HTMLCanvas.png">

  <title>Text / Rendering text along an arc. / Essential HTML5 Canvas</title>
  <meta name="description" content="Text / Rendering text along an arc. / Essential HTML5 Canvas">

  <link rel="icon" href="s/favicon-9dfe2f70.ico">

  <link href="s/main-e8ec5816.css" rel="stylesheet">
  <link href="s/bundle-83cf4538.css" rel="stylesheet">

  
  <script src="s/app-htmlcanvas-4af35db6.js" defer></script>
  <script src="s/bundle-fd6a7ad6.js" defer></script>
</head>

<body class="page">
  <script>
  function onLoad() {
    gBookTitle = "Essential HTML5 Canvas";

    httpsMaybeRedirect();

    let opts = {
      target: document.getElementById("toc"),
      props: {
        parentIdx: -1,
        level: 0,
      },
    };
    new app.toc(opts);

    opts = {
      target: document.getElementById("search-parent"),
      props: {
        bookTitle: gBookTitle,
      },
    };
    new app.searchInput(opts);

    opts = {
      target: document.getElementById("page-toc"),
    };
    new app.pageToc(opts);

    opts = {
      target: document.getElementById("book-toc"),
    };
    new app.bookToc(opts);
  }
  document.addEventListener('DOMContentLoaded', onLoad);
</script>
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none">
  <symbol id="arrow-expanded" viewbox="0 0 16 16">
    <path fill="%23646465" d="M11 10H5.344L11 4.414V10z" />
  </symbol>

  <symbol id="arrow-not-expanded" viewbox="0 0 16 16">
    <path fill="%23646465" d="M6 4v8l4-4-4-4zm1 2.414L8.586 8 7 9.586V6.414z" />
  </symbol>

  <symbol id="icon-github" viewbox="0 0 496 512">
    <path
      d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z" />
  </symbol>

  <symbol id="icon-home" viewbox="0 0 576 512">
    <path
      d="M488 312.7V456c0 13.3-10.7 24-24 24H348c-6.6 0-12-5.4-12-12V356c0-6.6-5.4-12-12-12h-72c-6.6 0-12 5.4-12 12v112c0 6.6-5.4 12-12 12H112c-13.3 0-24-10.7-24-24V312.7c0-3.6 1.6-7 4.4-9.3l188-154.8c4.4-3.6 10.8-3.6 15.3 0l188 154.8c2.7 2.3 4.3 5.7 4.3 9.3zm83.6-60.9L488 182.9V44.4c0-6.6-5.4-12-12-12h-56c-6.6 0-12 5.4-12 12V117l-89.5-73.7c-17.7-14.6-43.3-14.6-61 0L4.4 251.8c-5.1 4.2-5.8 11.8-1.6 16.9l25.5 31c4.2 5.1 11.8 5.8 16.9 1.6l235.2-193.7c4.4-3.6 10.8-3.6 15.3 0l235.2 193.7c5.1 4.2 12.7 3.5 16.9-1.6l25.5-31c4.2-5.2 3.4-12.7-1.7-16.9z" />
  </symbol>

  <symbol id="icon-twitter" viewbox="0 0 512 512">
    <path
      d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z" />
  </symbol>

  <symbol id="icon-edit" viewbox="0 0 576 512">
    <path
      d="M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z" />
  </symbol>

  <symbol id="icon-star" viewbox="0 0 576 512">
    <path
      d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z" />
  </symbol>
</svg>
  <header class="page__header">
  <div class="page__header__left">
    <a id="link-home" href="index.html">
      <svg class="icon-home">
        <use xlink:href="#icon-home"></use>
      </svg>
      &nbsp;Essential HTML5 Canvas</a>
  </div>
  <div class="page__header__center" id="search-parent">
  </div>
  <div class="page__header__right">
  </div>
</header>

  <div id="toc"></div>

  <div class="content">
    <div class="article">
      

<div style="display: flex; justify-content: space-between">
  <h1 class="title">Rendering text along an arc.</h1>
  <a class="edit-link" style="font-size: 80%" href="https://notion.so/1a4ae6db10104e76b69a87a803d10615" rel="nofollow"
  target="_blank">suggest change</a>
</div>


      <p>This example shows how to render text along an arc. It includes how you can add functionality to the <code>CanvasRenderingContext2D</code> by extending its prototype.</p><p>This examples is derived from the stackoverflow answer <a href="http://stackoverflow.com/a/34170195/3877726">Circular Text</a>.</p><h2 id="f5f4ac00-6696-4e9e-88f9-7cf002ba1613" class=""><strong>Example rendering</strong><a class="header-anchor" href="#f5f4ac00-6696-4e9e-88f9-7cf002ba1613" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a></h2><img class="img" src="/img/af53aec603648022f6faa2278572650026155b23.png"><hr id="6b9bb237-fb6e-4fdc-9951-7164d3d80832"/><h2 id="3948fa67-11dc-4b81-baa9-3896118c2182" class="">Example code<a class="header-anchor" href="#3948fa67-11dc-4b81-baa9-3896118c2182" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a></h2><p>The example adds 3 new text rendering functions to the 2D context prototype.</p><ul id="9818b1a9-a516-46b5-96ac-e554ecc5532f" class="bulleted-list"><li><strong>ctx.fillCircleText(text, x, y, radius, start, end, forward);</strong></li><li><strong>ctx.strokeCircleText(text, x, y, radius, start, end, forward);</strong></li><li><strong>ctx.measureCircleText(text, radius);</strong></li></ul>
<div class="code-box lang-JavaScript">
	<div>
	<pre class="chroma"><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="kr">const</span> <span class="nx">FILL</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>        <span class="c1">// const to indicate filltext render
</span><span class="c1"></span>    <span class="kr">const</span> <span class="nx">STROKE</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">renderType</span> <span class="o">=</span> <span class="nx">FILL</span><span class="p">;</span> <span class="c1">// used internal to set fill or stroke text
</span><span class="c1"></span>    <span class="kr">const</span> <span class="nx">multiplyCurrentTransform</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span> <span class="c1">// if true Use current transform when rendering
</span><span class="c1"></span>                                           <span class="c1">// if false use absolute coordinates which is a little quicker
</span><span class="c1"></span>                                           <span class="c1">// after render the currentTransform is restored to default transform
</span><span class="c1"></span>                                           
      

    <span class="c1">// measure circle text
</span><span class="c1"></span>    <span class="c1">// ctx: canvas context
</span><span class="c1"></span>    <span class="c1">// text: string of text to measure
</span><span class="c1"></span>    <span class="c1">// r: radius in pixels
</span><span class="c1"></span>    <span class="c1">//
</span><span class="c1"></span>    <span class="c1">// returns the size metrics of the text
</span><span class="c1"></span>    <span class="c1">//
</span><span class="c1"></span>    <span class="c1">// width: Pixel width of text
</span><span class="c1"></span>    <span class="c1">// angularWidth : angular width of text in radians
</span><span class="c1"></span>    <span class="c1">// pixelAngularSize : angular width of a pixel in radians
</span><span class="c1"></span>    <span class="kd">var</span> <span class="nx">measure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">text</span><span class="p">,</span> <span class="nx">radius</span><span class="p">){</span>        
        <span class="kd">var</span> <span class="nx">textWidth</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">measureText</span><span class="p">(</span><span class="nx">text</span><span class="p">).</span><span class="nx">width</span><span class="p">;</span> <span class="c1">// get the width of all the text
</span><span class="c1"></span>        <span class="k">return</span> <span class="p">{</span>
            <span class="nx">width</span>               <span class="o">:</span> <span class="nx">textWidth</span><span class="p">,</span>
            <span class="nx">angularWidth</span>        <span class="o">:</span> <span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nx">textWidth</span><span class="p">,</span>
            <span class="nx">pixelAngularSize</span>    <span class="o">:</span> <span class="mi">1</span> <span class="o">/</span> <span class="nx">radius</span>
        <span class="p">};</span>
    <span class="p">}</span>

    <span class="c1">// displays text along a circle
</span><span class="c1"></span>    <span class="c1">// ctx: canvas context
</span><span class="c1"></span>    <span class="c1">// text: string of text to measure
</span><span class="c1"></span>    <span class="c1">// x,y: position of circle center
</span><span class="c1"></span>    <span class="c1">// r: radius of circle in pixels
</span><span class="c1"></span>    <span class="c1">// start: angle in radians to start. 
</span><span class="c1"></span>    <span class="c1">// [end]: optional. If included text align is ignored and the text is 
</span><span class="c1"></span>    <span class="c1">//        scaled to fit between start and end;
</span><span class="c1"></span>    <span class="c1">// [forward]: optional default true. if true text direction is forwards, if false  direction is backward
</span><span class="c1"></span>    <span class="kd">var</span> <span class="nx">circleText</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">text</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">radius</span><span class="p">,</span> <span class="nx">start</span><span class="p">,</span> <span class="nx">end</span><span class="p">,</span> <span class="nx">forward</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">textWidth</span><span class="p">,</span> <span class="nx">pA</span><span class="p">,</span> <span class="nx">pAS</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">aw</span><span class="p">,</span> <span class="nx">wScale</span><span class="p">,</span> <span class="nx">aligned</span><span class="p">,</span> <span class="nx">dir</span><span class="p">,</span> <span class="nx">fontSize</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">text</span><span class="p">.</span><span class="nx">trim</span><span class="p">()</span> <span class="o">===</span> <span class="s2">&#34;&#34;</span> <span class="o">||</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">globalAlpha</span> <span class="o">===</span> <span class="mi">0</span><span class="p">){</span> <span class="c1">// dont render empty string or transparent
</span><span class="c1"></span>            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span><span class="p">(</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="o">||</span> <span class="nb">isNaN</span><span class="p">(</span><span class="nx">y</span><span class="p">)</span> <span class="o">||</span> <span class="nb">isNaN</span><span class="p">(</span><span class="nx">radius</span><span class="p">)</span> <span class="o">||</span> <span class="nb">isNaN</span><span class="p">(</span><span class="nx">start</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="nx">end</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">end</span> <span class="o">!==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nb">isNaN</span><span class="p">(</span><span class="nx">end</span><span class="p">))){</span> <span class="c1">// 
</span><span class="c1"></span>            <span class="k">throw</span> <span class="nx">TypeError</span><span class="p">(</span><span class="s2">&#34;circle text arguments requires a number for x,y, radius, start, and end.&#34;</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="nx">aligned</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">textAlign</span><span class="p">;</span>        <span class="c1">// save the current textAlign so that it can be restored at end
</span><span class="c1"></span>        <span class="nx">dir</span> <span class="o">=</span> <span class="nx">forward</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="nx">forward</span> <span class="o">===</span> <span class="kc">false</span> <span class="o">?</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>  <span class="c1">// set dir if not true or false set forward as true  
</span><span class="c1"></span>        <span class="nx">pAS</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="nx">radius</span><span class="p">;</span>               <span class="c1">// get the angular size of a pixel in radians
</span><span class="c1"></span>        <span class="nx">textWidth</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">measureText</span><span class="p">(</span><span class="nx">text</span><span class="p">).</span><span class="nx">width</span><span class="p">;</span> <span class="c1">// get the width of all the text
</span><span class="c1"></span>        <span class="k">if</span> <span class="p">(</span><span class="nx">end</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">end</span> <span class="o">!==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// if end is supplied then fit text between start and end
</span><span class="c1"></span>            <span class="nx">pA</span> <span class="o">=</span> <span class="p">((</span><span class="nx">end</span> <span class="o">-</span> <span class="nx">start</span><span class="p">)</span> <span class="o">/</span> <span class="nx">textWidth</span><span class="p">)</span> <span class="o">*</span> <span class="nx">dir</span><span class="p">;</span>
            <span class="nx">wScale</span> <span class="o">=</span> <span class="p">(</span><span class="nx">pA</span> <span class="o">/</span> <span class="nx">pAS</span><span class="p">)</span> <span class="o">*</span> <span class="nx">dir</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>                 <span class="c1">// if no end is supplied correct start and end for alignment
</span><span class="c1"></span>            <span class="c1">// if forward is not given then swap top of circle text to read the correct direction
</span><span class="c1"></span>            <span class="k">if</span><span class="p">(</span><span class="nx">forward</span> <span class="o">===</span> <span class="kc">null</span> <span class="o">||</span> <span class="nx">forward</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">){</span>
                <span class="k">if</span><span class="p">(((</span><span class="nx">start</span> <span class="o">%</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">*</span> <span class="mi">2</span><span class="p">))</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">){</span>
                    <span class="nx">dir</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="nx">pA</span> <span class="o">=</span> <span class="o">-</span><span class="nx">pAS</span> <span class="o">*</span> <span class="nx">dir</span> <span class="p">;</span>
            <span class="nx">wScale</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="nx">dir</span><span class="p">;</span>
            <span class="k">switch</span> <span class="p">(</span><span class="nx">aligned</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">case</span> <span class="s2">&#34;center&#34;</span><span class="o">:</span>       <span class="c1">// if centered move around half width
</span><span class="c1"></span>                <span class="nx">start</span> <span class="o">-=</span> <span class="p">(</span><span class="nx">pA</span> <span class="o">*</span> <span class="nx">textWidth</span> <span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
                <span class="nx">end</span> <span class="o">=</span> <span class="nx">start</span> <span class="o">+</span> <span class="nx">pA</span> <span class="o">*</span> <span class="nx">textWidth</span><span class="p">;</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="k">case</span> <span class="s2">&#34;right&#34;</span><span class="o">:</span><span class="c1">// intentionally falls through to case &#34;end&#34;
</span><span class="c1"></span>            <span class="k">case</span> <span class="s2">&#34;end&#34;</span><span class="o">:</span>
                <span class="nx">end</span> <span class="o">=</span> <span class="nx">start</span><span class="p">;</span>
                <span class="nx">start</span> <span class="o">-=</span> <span class="nx">pA</span> <span class="o">*</span> <span class="nx">textWidth</span><span class="p">;</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="k">case</span> <span class="s2">&#34;left&#34;</span><span class="o">:</span>  <span class="c1">// intentionally falls through to case &#34;start&#34;
</span><span class="c1"></span>            <span class="k">case</span> <span class="s2">&#34;start&#34;</span><span class="o">:</span>
                <span class="nx">end</span> <span class="o">=</span> <span class="nx">start</span> <span class="o">+</span> <span class="nx">pA</span> <span class="o">*</span> <span class="nx">textWidth</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="nx">ctx</span><span class="p">.</span><span class="nx">textAlign</span> <span class="o">=</span> <span class="s2">&#34;center&#34;</span><span class="p">;</span>                     <span class="c1">// align for rendering
</span><span class="c1"></span>        <span class="nx">a</span> <span class="o">=</span> <span class="nx">start</span><span class="p">;</span>                                    <span class="c1">// set the start angle
</span><span class="c1"></span>        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">text</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>    <span class="c1">// for each character
</span><span class="c1"></span>            <span class="nx">aw</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">measureText</span><span class="p">(</span><span class="nx">text</span><span class="p">[</span><span class="nx">i</span><span class="p">]).</span><span class="nx">width</span> <span class="o">*</span> <span class="nx">pA</span><span class="p">;</span> <span class="c1">// get the angular width of the text
</span><span class="c1"></span>            <span class="kd">var</span> <span class="nx">xDx</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">a</span> <span class="o">+</span> <span class="nx">aw</span> <span class="o">/</span> <span class="mi">2</span><span class="p">);</span>           <span class="c1">// get the yAxies vector from the center x,y out
</span><span class="c1"></span>            <span class="kd">var</span> <span class="nx">xDy</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">a</span> <span class="o">+</span> <span class="nx">aw</span> <span class="o">/</span> <span class="mi">2</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">multiplyCurrentTransform</span><span class="p">){</span> <span class="c1">// transform multiplying current transform
</span><span class="c1"></span>                <span class="nx">ctx</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">xDy</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// is the text upside down. If it is flip it
</span><span class="c1"></span>                    <span class="nx">ctx</span><span class="p">.</span><span class="nx">transform</span><span class="p">(</span><span class="o">-</span><span class="nx">xDy</span> <span class="o">*</span> <span class="nx">wScale</span><span class="p">,</span> <span class="nx">xDx</span> <span class="o">*</span> <span class="nx">wScale</span><span class="p">,</span> <span class="o">-</span><span class="nx">xDx</span><span class="p">,</span> <span class="o">-</span><span class="nx">xDy</span><span class="p">,</span> <span class="nx">xDx</span> <span class="o">*</span> <span class="nx">radius</span> <span class="o">+</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">xDy</span> <span class="o">*</span> <span class="nx">radius</span> <span class="o">+</span> <span class="nx">y</span><span class="p">);</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">ctx</span><span class="p">.</span><span class="nx">transform</span><span class="p">(</span><span class="o">-</span><span class="nx">xDy</span> <span class="o">*</span> <span class="nx">wScale</span><span class="p">,</span> <span class="nx">xDx</span> <span class="o">*</span> <span class="nx">wScale</span><span class="p">,</span> <span class="nx">xDx</span><span class="p">,</span> <span class="nx">xDy</span><span class="p">,</span> <span class="nx">xDx</span> <span class="o">*</span> <span class="nx">radius</span> <span class="o">+</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">xDy</span> <span class="o">*</span> <span class="nx">radius</span> <span class="o">+</span> <span class="nx">y</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">xDy</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// is the text upside down. If it is flip it
</span><span class="c1"></span>                    <span class="nx">ctx</span><span class="p">.</span><span class="nx">setTransform</span><span class="p">(</span><span class="o">-</span><span class="nx">xDy</span> <span class="o">*</span> <span class="nx">wScale</span><span class="p">,</span> <span class="nx">xDx</span> <span class="o">*</span> <span class="nx">wScale</span><span class="p">,</span> <span class="o">-</span><span class="nx">xDx</span><span class="p">,</span> <span class="o">-</span><span class="nx">xDy</span><span class="p">,</span> <span class="nx">xDx</span> <span class="o">*</span> <span class="nx">radius</span> <span class="o">+</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">xDy</span> <span class="o">*</span> <span class="nx">radius</span> <span class="o">+</span> <span class="nx">y</span><span class="p">);</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">ctx</span><span class="p">.</span><span class="nx">setTransform</span><span class="p">(</span><span class="o">-</span><span class="nx">xDy</span> <span class="o">*</span> <span class="nx">wScale</span><span class="p">,</span> <span class="nx">xDx</span> <span class="o">*</span> <span class="nx">wScale</span><span class="p">,</span> <span class="nx">xDx</span><span class="p">,</span> <span class="nx">xDy</span><span class="p">,</span> <span class="nx">xDx</span> <span class="o">*</span> <span class="nx">radius</span> <span class="o">+</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">xDy</span> <span class="o">*</span> <span class="nx">radius</span> <span class="o">+</span> <span class="nx">y</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">renderType</span> <span class="o">===</span> <span class="nx">FILL</span><span class="p">){</span>
                <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillText</span><span class="p">(</span><span class="nx">text</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>    <span class="c1">// render the character
</span><span class="c1"></span>            <span class="p">}</span><span class="k">else</span><span class="p">{</span>                    
                <span class="nx">ctx</span><span class="p">.</span><span class="nx">strokeText</span><span class="p">(</span><span class="nx">text</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>  <span class="c1">// render the character
</span><span class="c1"></span>            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">multiplyCurrentTransform</span><span class="p">){</span>  <span class="c1">// restore current transform
</span><span class="c1"></span>                <span class="nx">ctx</span><span class="p">.</span><span class="nx">restore</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="nx">a</span> <span class="o">+=</span> <span class="nx">aw</span><span class="p">;</span>                     <span class="c1">// step to the next angle
</span><span class="c1"></span>        <span class="p">}</span>
        <span class="c1">// all done clean up.
</span><span class="c1"></span>        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">multiplyCurrentTransform</span><span class="p">){</span>
            <span class="nx">ctx</span><span class="p">.</span><span class="nx">setTransform</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="c1">// restore the transform
</span><span class="c1"></span>        <span class="p">}</span>
        <span class="nx">ctx</span><span class="p">.</span><span class="nx">textAlign</span> <span class="o">=</span> <span class="nx">aligned</span><span class="p">;</span>            <span class="c1">// restore the text alignment
</span><span class="c1"></span>    <span class="p">}</span>
    <span class="c1">// define fill text
</span><span class="c1"></span>    <span class="kd">var</span> <span class="nx">fillCircleText</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">radius</span><span class="p">,</span> <span class="nx">start</span><span class="p">,</span> <span class="nx">end</span><span class="p">,</span> <span class="nx">forward</span><span class="p">){</span>
        <span class="nx">renderType</span> <span class="o">=</span> <span class="nx">FILL</span><span class="p">;</span>
        <span class="nx">circleText</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">text</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">radius</span><span class="p">,</span> <span class="nx">start</span><span class="p">,</span> <span class="nx">end</span><span class="p">,</span> <span class="nx">forward</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="c1">// define stroke text
</span><span class="c1"></span>    <span class="kd">var</span> <span class="nx">strokeCircleText</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">radius</span><span class="p">,</span> <span class="nx">start</span><span class="p">,</span> <span class="nx">end</span><span class="p">,</span> <span class="nx">forward</span><span class="p">){</span>
        <span class="nx">renderType</span> <span class="o">=</span> <span class="nx">STROKE</span><span class="p">;</span>
        <span class="nx">circleText</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">text</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">radius</span><span class="p">,</span> <span class="nx">start</span><span class="p">,</span> <span class="nx">end</span><span class="p">,</span> <span class="nx">forward</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="c1">// define measure text
</span><span class="c1"></span>    <span class="kd">var</span> <span class="nx">measureCircleTextExt</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">,</span><span class="nx">radius</span><span class="p">){</span>
        <span class="k">return</span> <span class="nx">measure</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">text</span><span class="p">,</span> <span class="nx">radius</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="c1">// set the prototypes
</span><span class="c1"></span>    <span class="nx">CanvasRenderingContext2D</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">fillCircleText</span> <span class="o">=</span> <span class="nx">fillCircleText</span><span class="p">;</span>
    <span class="nx">CanvasRenderingContext2D</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">strokeCircleText</span> <span class="o">=</span> <span class="nx">strokeCircleText</span><span class="p">;</span>
    <span class="nx">CanvasRenderingContext2D</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">measureCircleText</span> <span class="o">=</span> <span class="nx">measureCircleTextExt</span><span class="p">;</span>  
<span class="p">})();</span>
</pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><hr id="cb644a56-cd99-4b02-a88a-239fbdd772b1"/><h2 id="09337a3f-1459-459b-a212-f7e69b2ba8a1" class=""><strong>Function descriptions</strong><a class="header-anchor" href="#09337a3f-1459-459b-a212-f7e69b2ba8a1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a></h2><p>This example adds 3 functions to the <code>CanvasRenderingContext2D prototype</code>. <code>fillCircleText</code>, <code>strokeCircleText</code>, and <code>measureCircleText</code></p><h1 id="9ff4cd96-e8f6-4349-bd2f-f72774d5548b" class=""><em>CanvasRenderingContext2D.fillCircleText(text, x, y, radius, start, [end, [forward]]);</em><a class="header-anchor" href="#9ff4cd96-e8f6-4349-bd2f-f72774d5548b" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a></h1><h1 id="14ee5756-93d7-4d79-b2e3-6f3b42b6966e" class=""><em>CanvasRenderingContext2D.strokeCircleText(text, x, y, radius, start, [end, [forward]]);</em><a class="header-anchor" href="#14ee5756-93d7-4d79-b2e3-6f3b42b6966e" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a></h1><ul id="5f71c512-088a-4608-94a0-095fddd2bc10" class="bulleted-list"><li><strong>text:</strong> Text to render as String.</li><li><strong>x</strong>,<strong>y</strong>: Position of circle center as Numbers.</li><li><strong>radius:</strong> radius of circle in pixels</li><li><strong>start:</strong> angle in radians to start.</li><li><strong>[end]:</strong> optional. If included <code>ctx.textAlign</code> is ignored and the text is scaled to fit between start and end.</li><li><strong>[forward]:</strong> optional default ‘true’. if true text direction is forwards, if ‘false’ direction is backward.</li></ul><p>Both functions use the textBaseline to position the text vertically around the radius. For the best results use <code>ctx.TextBaseline</code>.</p><p>Functions will throw a <code>TypeError</code> is any of the numerical arguments as NaN.</p><p>If the <code>text</code> argument trims to an empty string or <code>ctx.globalAlpha = 0</code> the function just drops through and does nothing.</p><h1 id="98807a7a-45c1-43d8-9ce9-9f0324630b29" class=""><em>CanvasRenderingContext2D.measureCircleText(text, radius);</em><a class="header-anchor" href="#98807a7a-45c1-43d8-9ce9-9f0324630b29" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a></h1>
<div class="code-box lang-Plain Text">
	<div>
	<pre class="chroma">- **text:** String of text to measure.
 - **radius:** radius of circle in pixels.</pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p>Returns a Object containing various size metrics for rendering circular text</p>
<div class="code-box lang-Plain Text">
	<div>
	<pre class="chroma">- **width:** Pixel width of text as it would normaly be rendered
- **angularWidth:** angular width of text in radians.
- **pixelAngularSize:** angular width of a pixel in radians.</pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><h2 id="ff633802-1802-4dc6-978f-f456ac6e63b4" class=""><strong>Usage examples</strong><a class="header-anchor" href="#ff633802-1802-4dc6-978f-f456ac6e63b4" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a></h2>
<div class="code-box lang-JavaScript">
	<div>
	<pre class="chroma"><span class="kr">const</span> <span class="nx">rad</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">height</span> <span class="o">*</span> <span class="mf">0.4</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">text</span> <span class="o">=</span> <span class="s2">&#34;Hello circle TEXT!&#34;</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">fontSize</span> <span class="o">=</span> <span class="mi">40</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">centX</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">centY</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">height</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">clearRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">height</span><span class="p">)</span>

<span class="nx">ctx</span><span class="p">.</span><span class="nx">font</span> <span class="o">=</span> <span class="nx">fontSize</span> <span class="o">+</span> <span class="s2">&#34;px verdana&#34;</span><span class="p">;</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">textAlign</span> <span class="o">=</span> <span class="s2">&#34;center&#34;</span><span class="p">;</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">textBaseline</span> <span class="o">=</span> <span class="s2">&#34;bottom&#34;</span><span class="p">;</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s2">&#34;#000&#34;</span><span class="p">;</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">strokeStyle</span> <span class="o">=</span> <span class="s2">&#34;#666&#34;</span><span class="p">;</span>

<span class="c1">// Text under stretched from Math.PI to 0 (180 - 0 deg)
</span><span class="c1"></span><span class="nx">ctx</span><span class="p">.</span><span class="nx">fillCircleText</span><span class="p">(</span><span class="nx">text</span><span class="p">,</span> <span class="nx">centX</span><span class="p">,</span> <span class="nx">centY</span><span class="p">,</span> <span class="nx">rad</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

<span class="c1">// text over top centered at Math.PI * 1.5 ( 270 deg)
</span><span class="c1"></span><span class="nx">ctx</span><span class="p">.</span><span class="nx">fillCircleText</span><span class="p">(</span><span class="nx">text</span><span class="p">,</span> <span class="nx">centX</span><span class="p">,</span> <span class="nx">centY</span><span class="p">,</span> <span class="nx">rad</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">*</span> <span class="mf">1.5</span><span class="p">);</span>

<span class="c1">// text under top centered at Math.PI * 1.5 ( 270 deg)
</span><span class="c1"></span><span class="nx">ctx</span><span class="p">.</span><span class="nx">textBaseline</span> <span class="o">=</span> <span class="s2">&#34;top&#34;</span><span class="p">;</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">fillCircleText</span><span class="p">(</span><span class="nx">text</span><span class="p">,</span> <span class="nx">centX</span><span class="p">,</span> <span class="nx">centY</span><span class="p">,</span> <span class="nx">rad</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">*</span> <span class="mf">1.5</span><span class="p">);</span>

<span class="c1">// text over top centered at Math.PI * 1.5 ( 270 deg)
</span><span class="c1"></span><span class="nx">ctx</span><span class="p">.</span><span class="nx">textBaseline</span> <span class="o">=</span> <span class="s2">&#34;middle&#34;</span><span class="p">;</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">fillCircleText</span><span class="p">(</span><span class="nx">text</span><span class="p">,</span> <span class="nx">centX</span><span class="p">,</span> <span class="nx">centY</span><span class="p">,</span> <span class="nx">rad</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">*</span> <span class="mf">1.5</span><span class="p">);</span>

<span class="c1">// Use measureCircleText to get angular size
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">circleTextMetric</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">measureCircleText</span><span class="p">(</span><span class="s2">&#34;Text to measure&#34;</span><span class="p">,</span> <span class="nx">rad</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">circleTextMetric</span><span class="p">.</span><span class="nx">width</span><span class="p">);</span>            <span class="c1">// width of text if rendered normally
</span><span class="c1"></span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">circleTextMetric</span><span class="p">.</span><span class="nx">angularWidth</span><span class="p">);</span>     <span class="c1">// angular width of text
</span><span class="c1"></span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">circleTextMetric</span><span class="p">.</span><span class="nx">pixelAngularSize</span><span class="p">);</span> <span class="c1">// angular size of a pixel
</span><span class="c1"></span>
<span class="c1">// Use measure text to draw a arc around the text
</span><span class="c1"></span><span class="nx">ctx</span><span class="p">.</span><span class="nx">textBaseline</span> <span class="o">=</span> <span class="s2">&#34;middle&#34;</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">measureCircleText</span><span class="p">(</span><span class="nx">text</span><span class="p">,</span> <span class="nx">rad</span><span class="p">).</span><span class="nx">angularWidth</span><span class="p">;</span>    
<span class="nx">ctx</span><span class="p">.</span><span class="nx">fillCircleText</span><span class="p">(</span><span class="nx">text</span><span class="p">,</span> <span class="nx">centX</span><span class="p">,</span> <span class="nx">centY</span><span class="p">,</span> <span class="nx">rad</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">*</span> <span class="mf">1.5</span><span class="p">);</span>

<span class="c1">// render the arc around the text
</span><span class="c1"></span><span class="nx">ctx</span><span class="p">.</span><span class="nx">strokeStyle</span><span class="o">=</span> <span class="s2">&#34;red&#34;</span><span class="p">;</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">lineWidth</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">arc</span><span class="p">(</span><span class="nx">centX</span><span class="p">,</span> <span class="nx">centY</span><span class="p">,</span> <span class="nx">rad</span> <span class="o">+</span> <span class="nx">fontSize</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">*</span> <span class="mf">1.5</span> <span class="o">-</span> <span class="nx">width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="o">*</span><span class="mf">1.5</span> <span class="o">+</span> <span class="nx">width</span><span class="o">/</span><span class="mi">2</span><span class="p">);</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">arc</span><span class="p">(</span><span class="nx">centX</span><span class="p">,</span> <span class="nx">centY</span><span class="p">,</span> <span class="nx">rad</span> <span class="o">-</span> <span class="nx">fontSize</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">*</span> <span class="mf">1.5</span> <span class="o">+</span> <span class="nx">width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="o">*</span><span class="mf">1.5</span> <span class="o">-</span> <span class="nx">width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="kc">true</span><span class="p">);</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">closePath</span><span class="p">();</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">stroke</span><span class="p">();</span>
</pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><blockquote id="83c1a960-52fc-48ba-9135-9fcf787068bc" class="">NOTE: The text rendered is only an approximation of circular text. For example if two l’s are rendered the two lines will not be parallel, but if you render a “H” the two edges will be parallel. This is because each character is rendered as close as possible to the required direction, rather than each pixel being correctly transformed to create circular text.</blockquote><blockquote id="0b1735a7-79cd-4ed8-ac18-953fa43a20c8" class="">NOTE: const multiplyCurrentTransform = true; defined in this example is used to set the transformation method used. If false the transformation for circular text rendering is absolute and does not depend on the current transformation state. The text will not be effected by any previous scale, rotate, or translate transforms. This will increase the performance of the render function, after the function is called the transform will be set to the default setTransform(1,0,0,1,0,0) If multiplyCurrentTransform = true (set as default in this example) the text will use the current transform so that the text can be scaled translated, skewed, rotated, etc but modifying the current transform befor calling the fillCircleText and strokeCircleText functions. Depending on the current state of the 2D context this may be somewhat slower then multiplyCurrentTransform = false</blockquote>

      <div class="forum-link">
  Found a mistake? Have a question or improvement idea?
  <a href="#" onclick="showContact(); return false;">Let me know</a>.
</div>

      <form id="contact-form" action="https://formsubmit.co/kkowalczyk@gmail.com" method="POST">
  <p>
    <div class="contact-light">Feedback about page:</div>
    <input type="text" name="page-url" id="contact-page-url" readonly />
  </p>

  <p>
    <div class="contact-light">Feedback:</div>
    <textarea name="message" id="msg-for-chris"></textarea>
    <div class="contact-light">Optional: your email if you want me to get back to you: </div>
    <input type="email" name="email" />
    <input type="text" name="_honey" style="display:none">
  </p>

  <p>
    <button type="submit" class="contact-btn">
      Send Feedback
    </button>

    <button class="contact-btn" style="float: right;" onclick="hideContact(); return false;">
      Cancel
    </button>
  </p>

  <p>
    <div data-netlify-recaptcha></div>
  </p>
</form>


      <hr class="article-bottom-sep">
    </div>

    <div id="page-toc"></div>

    <div id="chapter-toc-wrapper">
      <hr />
      <div class="hdr">Table Of Contents</div>
      <div id="book-toc"></div>
    </div>
  </div>

  <footer class="page__footer">
  <div class="page__footer__left">
    Maintained by
    <a href="https://blog.kowalczyk.info" target="_blank">Krzysztof Kowalczyk</a>
  </div>
  <div class="share-me">
    <a href="https://twitter.com/intent/tweet?text=%22Essential%20HTML5%20Canvas%22%20-%20a%20free%20programming%20book&url=%2fessential%2fhtmlcanvas%2f&via=kjk">Share
      <b>Essential HTML5 Canvas</b> on&nbsp;
      <svg class="icon-twitter">
        <use xlink:href="#icon-twitter"></use>
      </svg>
    </a>
  </div>
  <div class="page__footer__right">
    
  </div>
</footer>

  

</body>

</html>