<!doctype html>
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="referrer" content="always">

  <meta name="twitter:card" value="summary">
  <meta name="twitter:site" content="@kjk">
  <meta name="twitter:title" content="Adding Transforms to a CALayer translate rotate scale">
  
  <meta name="twitter:description" content="Adding Transforms to a CALayer translate rotate scale">
  <meta name="twitter:creator" content="@kjk">
  <meta name="twitter:image" content="https://www.programming-books.io/covers/twitter/iOS.png">
  
  <meta property="og:title" content="Adding Transforms to a CALayer translate rotate scale">
  <meta property="og:type" content="article" />
  <meta property="og:url" content="https://www.programming-books.io/essential/ios/adding-transforms-to-a-calayer-translate-rotate-scale-47ca5dfcea9e4e8997367a0170ab7274" />
  
  <meta property="og:description" content="Adding Transforms to a CALayer translate rotate scale">
  <meta property="og:image" content="https://www.programming-books.io/covers/twitter/iOS.png">

  <title>CALayer / Adding Transforms to a CALayer translate rotate scale / Essential iOS</title>
  <meta name="description" content="CALayer / Adding Transforms to a CALayer translate rotate scale / Essential iOS">
  <link rel="icon" href="/s/favicon.ico">
  <link href="/s/main.css" rel="stylesheet">
  <link href="/s/bundle.css" rel="stylesheet">
  <script src="/s/app-ios.js" defer></script>
  <script src="/s/bundle.js" defer></script>
</head>

<body class="page">
  <script>
  function onLoad() {
    gBookTitle = "Essential iOS";

    httpsMaybeRedirect();

    let opts = {
      target: document.getElementById("toc"),
      props: {
        parentIdx: -1,
        level: 0,
      },
    };
    new app.toc(opts);

    opts = {
      target: document.getElementById("search-parent"),
      props: {
        bookTitle: gBookTitle,
      },
    };
    new app.searchInput(opts);

    opts = {
      target: document.getElementById("page-toc"),
    };
    new app.pageToc(opts);

    opts = {
      target: document.getElementById("book-toc"),
    };
    new app.bookToc(opts);
  }
  document.addEventListener('DOMContentLoaded', onLoad);
</script>
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none">
  <symbol id="arrow-expanded" viewbox="0 0 16 16">
    <path fill="%23646465" d="M11 10H5.344L11 4.414V10z" />
  </symbol>

  <symbol id="arrow-not-expanded" viewbox="0 0 16 16">
    <path fill="%23646465" d="M6 4v8l4-4-4-4zm1 2.414L8.586 8 7 9.586V6.414z" />
  </symbol>

  <symbol id="icon-github" viewbox="0 0 496 512">
    <path
      d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z" />
  </symbol>

  <symbol id="icon-home" viewbox="0 0 576 512">
    <path
      d="M488 312.7V456c0 13.3-10.7 24-24 24H348c-6.6 0-12-5.4-12-12V356c0-6.6-5.4-12-12-12h-72c-6.6 0-12 5.4-12 12v112c0 6.6-5.4 12-12 12H112c-13.3 0-24-10.7-24-24V312.7c0-3.6 1.6-7 4.4-9.3l188-154.8c4.4-3.6 10.8-3.6 15.3 0l188 154.8c2.7 2.3 4.3 5.7 4.3 9.3zm83.6-60.9L488 182.9V44.4c0-6.6-5.4-12-12-12h-56c-6.6 0-12 5.4-12 12V117l-89.5-73.7c-17.7-14.6-43.3-14.6-61 0L4.4 251.8c-5.1 4.2-5.8 11.8-1.6 16.9l25.5 31c4.2 5.1 11.8 5.8 16.9 1.6l235.2-193.7c4.4-3.6 10.8-3.6 15.3 0l235.2 193.7c5.1 4.2 12.7 3.5 16.9-1.6l25.5-31c4.2-5.2 3.4-12.7-1.7-16.9z" />
  </symbol>

  <symbol id="icon-twitter" viewbox="0 0 512 512">
    <path
      d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z" />
  </symbol>

  <symbol id="icon-edit" viewbox="0 0 576 512">
    <path
      d="M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z" />
  </symbol>

  <symbol id="icon-star" viewbox="0 0 576 512">
    <path
      d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z" />
  </symbol>
</svg>
  <header class="page__header">
  <div class="page__header__left">
    <a id="link-home" href="index.html">
      <svg class="icon-home">
        <use xlink:href="#icon-home"></use>
      </svg>
      &nbsp;Essential iOS</a>
  </div>
  <div class="page__header__center" id="search-parent">
  </div>
  <div class="page__header__right">
  </div>
</header>

  <div id="toc"></div>

  <div class="content">
    <div class="article">
      

<div style="display: flex; justify-content: space-between">
  <h1 class="title">Adding Transforms to a CALayer translate rotate scale</h1>
  <a class="edit-link" style="font-size: 80%" href="https://notion.so/47ca5dfcea9e4e8997367a0170ab7274" rel="nofollow"
  target="_blank">suggest change</a>
</div>


      <h1 id="4cb770f2-e9da-4a2e-8e1f-2b75ac0ea08c" class="">Basics<a class="header-anchor" href="#4cb770f2-e9da-4a2e-8e1f-2b75ac0ea08c" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a></h1><p>There are a number of different transforms you can do on a layer, but the basic ones are</p><ul id="7850f3b0-5576-4076-92b0-e5a60777a93f" class="bulleted-list"><li>translate (move)</li><li>scale</li><li>rotate</li></ul><img class="img" src="/img/e9470e459271a9f5124e6cfc0bd0b29b07e46b93.png"><p>To do transforms on a <code>CALayer</code>, you set the layer’s <code>transform</code> property to a <code>CATransform3D</code> type. For example, to translate a layer, you would do something like this:</p>
<div class="code-box lang-Plain Text">
	<div>
	<pre class="chroma">myLayer.transform = CATransform3DMakeTranslation(20, 30, 0)</pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p>The word <code>Make</code> is used in the name for creating the initial transform: CATransform3D<strong>Make</strong>Translation. Subsequent transforms that are applied omit the <code>Make</code>. See, for example, this rotation followed by a translation:</p>
<div class="code-box lang-Plain Text">
	<div>
	<pre class="chroma">let rotation = CATransform3DMakeRotation(CGFloat(30.0 * M_PI / 180.0), 20, 20, 0)
myLayer.transform = CATransform3DTranslate(rotation, 20, 30, 0)</pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p>Now that we have the basis of how to make a transform, let’s look at some examples of how to do each one. First, though, I’ll show how I set up the project in case you want to play around with it, too.</p><h1 id="f5dc49d4-a89b-4e09-933e-cd9ffbddb371" class="">Setup<a class="header-anchor" href="#f5dc49d4-a89b-4e09-933e-cd9ffbddb371" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a></h1><p>For the following examples I set up a Single View Application and added a <code>UIView</code> with a light blue background to the storyboard. I hooked up the view to the view controller with the following code:</p>
<div class="code-box lang-Plain Text">
	<div>
	<pre class="chroma">import UIKit

class ViewController: UIViewController {
    
    var myLayer = CATextLayer()
    @IBOutlet weak var myView: UIView!
    
    override func viewDidLoad() {
        super.viewDidLoad()
        
        // setup the sublayer
        addSubLayer()
        
        // do the transform
        transformExample()
    }
    
    func addSubLayer() {
        myLayer.frame = CGRect(x: 0, y: 0, width: 100, height: 40)
        myLayer.backgroundColor = UIColor.blueColor().CGColor
        myLayer.string = &#34;Hello&#34;
        myView.layer.addSublayer(myLayer)
    }
    
    //******** Replace this function with the examples below ********

    func transformExample() {
        
        // add transform code here ...
        
        
    }

}</pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p><a href="http://www.raywenderlich.com/90488/calayer-in-ios-with-swift-10-examples">There are many different kinds of </a><a href="http://www.raywenderlich.com/90488/calayer-in-ios-with-swift-10-examples"><code>CALayer</code></a>, but I chose to use <code>CATextLayer</code> so that the transforms will be more clear visually.</p><h1 id="778705fc-2ae6-4c0d-a505-5f150ebfb35b" class="">Translate<a class="header-anchor" href="#778705fc-2ae6-4c0d-a505-5f150ebfb35b" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a></h1><p>The translation transform moves the layer. The basic syntax is</p>
<div class="code-box lang-Plain Text">
	<div>
	<pre class="chroma">CATransform3DMakeTranslation(tx: CGFloat, ty: CGFloat, tz: CGFloat)</pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p>where <code>tx</code> is the change in the x coordinates, <code>ty</code> is the change in y, and <code>tz</code> is the change in z.</p><p><strong>Example</strong></p><img class="img" src="/img/d632a0fcfa306ab63a0d66a491ba753883fcc6bd.png"><p>In iOS the origin of the coordinate system is in the top left, so if we wanted to move the layer 90 points to the right and 50 points down, we would do the following:</p>
<div class="code-box lang-Plain Text">
	<div>
	<pre class="chroma">myLayer.transform = CATransform3DMakeTranslation(90, 50, 0)</pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p>Notes</p><ul id="2662ae92-2178-4cc7-85e4-a2e63bb4abba" class="bulleted-list"><li>Remember that you can paste this into the <code>transformExample()</code> method in the project code above.</li><li>Since we are just going to deal with two dimensions here, <code>tz</code> is set to <code>0</code>.</li><li>The red line in the image above goes from the center of the original location to the center of the new location. That’s because transforms are done in relation to the anchor point and the anchor point by default is in the center of the layer.</li></ul><h1 id="323e7c8b-0319-476c-a8a5-41ea70c91d56" class="">Scale<a class="header-anchor" href="#323e7c8b-0319-476c-a8a5-41ea70c91d56" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a></h1><p>The scale transform stretches or squishes the layer. The basic syntax is</p>
<div class="code-box lang-Plain Text">
	<div>
	<pre class="chroma">CATransform3DMakeScale(sx: CGFloat, sy: CGFloat, sz: CGFloat)</pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p>where <code>sx</code>, <code>sy</code>, and <code>sz</code> are the numbers by which to scale (multiply) the x, y, and z coordinates respectively.</p><p><strong>Example</strong></p><img class="img" src="/img/57d76ceb1d484112ac4058a0a732fbb1aa787f70.png"><p>If we wanted to half the width and triple the height, we would do the following</p>
<div class="code-box lang-Plain Text">
	<div>
	<pre class="chroma">myLayer.transform = CATransform3DMakeScale(0.5, 3.0, 1.0)</pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p>Notes</p><ul id="744742f9-018a-4451-8bfa-cb37e0e30cc9" class="bulleted-list"><li>Since we are only working in two dimensions, we just multiply the z coordinates by 1.0 to leave them unaffected.</li><li>The red dot in the image above represents the anchor point. Notice how the scaling is done in relation to the anchor point. That is, everything is either stretched toward or away from the anchor point.</li></ul><h1 id="4d5f3420-9369-4070-83a4-27fec51b6c33" class="">Rotate<a class="header-anchor" href="#4d5f3420-9369-4070-83a4-27fec51b6c33" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a></h1><p>The rotation transform rotates the layer around the anchor point (the center of the layer by default). The basic syntax is</p>
<div class="code-box lang-Plain Text">
	<div>
	<pre class="chroma">CATransform3DMakeRotation(angle: CGFloat, x: CGFloat, y: CGFloat, z: CGFloat)</pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p>where <code>angle</code> is the angle in radians that the layer should be rotated and <code>x</code>, <code>y</code>, and <code>z</code> are the axes about which to rotate. Setting an axis to 0 cancels a rotation around that particular axis.</p><p><strong>Example</strong></p><img class="img" src="/img/8b2fdeecf4b9137694d72cddb48cabc0004cdfeb.png"><p>If we wanted to rotate a layer clockwise 30 degrees, we would do the following:</p>
<div class="code-box lang-Plain Text">
	<div>
	<pre class="chroma">let degrees = 30.0
let radians = CGFloat(degrees * M_PI / 180)
myLayer.transform = CATransform3DMakeRotation(radians, 0.0, 0.0, 1.0)</pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p>Notes</p><ul id="585b5571-39c0-435e-bb3e-d4a7751057c3" class="bulleted-list"><li>Since we are working in two dimentions, we only want the xy plane to be rotated around the z axis. Thus we set <code>x</code> and <code>y</code> to <code>0.0</code> and set <code>z</code> to <code>1.0</code>.</li><li>This rotated the layer in a clockwise direction. We could have rotated counterclockwise by setting <code>z</code> to <code>-1.0</code>.</li><li>The red dot shows where the anchor point is. The rotation is done around the anchor point.</li></ul><h1 id="49838f79-5071-498f-9ec0-825243a09fbf" class="">Multiple transforms<a class="header-anchor" href="#49838f79-5071-498f-9ec0-825243a09fbf" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a></h1><p>In order to combine multiple transforms we could use concatination like this</p>
<div class="code-box lang-Plain Text">
	<div>
	<pre class="chroma">CATransform3DConcat(a: CATransform3D, b: CATransform3D)</pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p>However, we will just do one after another. The first transform will use the <code>Make</code> in its name. The following transforms will not use <code>Make</code>, but they will take the previous transform as a parameter.</p><p><strong>Example</strong></p><img class="img" src="/img/b5dd1f802ac1403a8bb9e3b58676659d3ccdfb52.png"><p>This time we combine all three of the previous transforms.</p>
<div class="code-box lang-Plain Text">
	<div>
	<pre class="chroma">let degrees = 30.0
let radians = CGFloat(degrees * M_PI / 180)

// translate
var transform = CATransform3DMakeTranslation(90, 50, 0)

// rotate
transform = CATransform3DRotate(transform, radians, 0.0, 0.0, 1.0)

// scale
transform = CATransform3DScale(transform, 0.5, 3.0, 1.0)

// apply the transforms
myLayer.transform = transform</pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p>Notes</p><ul id="4fb3caf1-3126-4db6-8297-dbdc0e6434e8" class="bulleted-list"><li>The order that the transforms are done in matters.</li><li>Everything was done in relation to the anchor point (red dot).</li></ul><h1 id="405b8f1d-c403-4602-adc4-120ef36dbfb0" class="">A Note about Anchor Point and Position<a class="header-anchor" href="#405b8f1d-c403-4602-adc4-120ef36dbfb0" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a></h1><p>We did all our transforms above without changing the anchor point. Sometimes it is necessary to change it, though, like if you want to rotate around some other point besides the center. However, this can be a little tricky.</p><p>The anchor point and position are both at the same place. The anchor point is expressed as a unit of the layer’s coordinate system (default is <code>0.5, 0.5</code>) and the position is expressed in the superlayer’s coordinate system. They can be set like this</p>
<div class="code-box lang-Plain Text">
	<div>
	<pre class="chroma">myLayer.anchorPoint = CGPoint(x: 0.0, y: 1.0)
myLayer.position = CGPoint(x: 50, y: 50)</pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p>If you only set the anchor point without changing the position, then the frame changes so that the position will be in the right spot. Or more precisely, the frame is recalculated based on the new anchor point and old position. This usually gives unexpected results. The following two articles have an excellent discussion of this.</p><ul id="ddf5104d-0456-4727-8ae8-d39b594e2536" class="bulleted-list"><li><a href="http://ronnqvi.st/about-the-anchorpoint/">About the anchorPoint</a></li><li><a href="http://ronnqvi.st/translate-rotate-translate/">Translate rotate translate?</a></li></ul><h1 id="0a387adb-dc0d-4e44-a932-428171cb0e99" class="">See also<a class="header-anchor" href="#0a387adb-dc0d-4e44-a932-428171cb0e99" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a></h1><ul id="2c1dad8f-0607-4812-9b57-2f249e6a6874" class="bulleted-list"><li><a href="http://stackoverflow.com/a/34984063/3681880">Border, rounded corners, and shadow on a </a><a href="http://stackoverflow.com/a/34984063/3681880"><code>CALayer</code></a></li><li><a href="http://stackoverflow.com/a/34659468/3681880">Using a border with a Bezier path for a layer</a></li></ul><p><em>This example originally comes from </em><a href="http://stackoverflow.com/a/34438890/3681880"><em>this Stack Overflow example</em></a><em>.</em></p>

      <div class="forum-link">
  Found a mistake? Have a question or improvement idea?
  <a href="#" onclick="showContact(); return false;">Let me know</a>.
</div>

      <form id="contact-form" action="https://formsubmit.co/kkowalczyk@gmail.com" method="POST">
  <p>
    <div class="contact-light">Feedback about page:</div>
    <input type="text" name="page-url" id="contact-page-url" readonly />
  </p>

  <p>
    <div class="contact-light">Feedback:</div>
    <textarea name="message" id="msg-for-chris"></textarea>
    <div class="contact-light">Optional: your email if you want me to get back to you: </div>
    <input type="email" name="email" />
    <input type="text" name="_honey" style="display:none">
  </p>

  <p>
    <button type="submit" class="contact-btn">
      Send Feedback
    </button>

    <button class="contact-btn" style="float: right;" onclick="hideContact(); return false;">
      Cancel
    </button>
  </p>

  <p>
    <div data-netlify-recaptcha></div>
  </p>
</form>


      <hr class="article-bottom-sep">
    </div>

    <div id="page-toc"></div>

    <div id="chapter-toc-wrapper">
      <hr />
      <div class="hdr">Table Of Contents</div>
      <div id="book-toc"></div>
    </div>
  </div>

  <footer class="page__footer">
  <div class="page__footer__left">
    Maintained by
    <a href="https://blog.kowalczyk.info" target="_blank">Krzysztof Kowalczyk</a>
  </div>
  <div class="share-me">
    <a href="https://twitter.com/intent/tweet?text=%22Essential%20iOS%22%20-%20a%20free%20programming%20book&url=https%3a%2f%2fwww.programming-books.io%2fessential%2fios%2f&via=kjk">Share
      <b>Essential iOS</b> on&nbsp;
      <svg class="icon-twitter">
        <use xlink:href="#icon-twitter"></use>
      </svg>
    </a>
  </div>
  <div class="page__footer__right">
    
  </div>
</footer>

  

</body>

</html>