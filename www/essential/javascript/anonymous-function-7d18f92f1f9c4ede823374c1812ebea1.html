<!doctype html>
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="referrer" content="always">

  <meta name="twitter:card" value="summary">
  <meta name="twitter:site" content="@kjk">
  <meta name="twitter:title" content="Anonymous Function">
  
  <meta name="twitter:description" content="Anonymous Function">
  <meta name="twitter:creator" content="@kjk">
  <meta name="twitter:image" content="/essential/javascript/covers/twitter/JavaScript.png">
  
  <meta property="og:title" content="Anonymous Function">
  <meta property="og:type" content="article" />
  <meta property="og:url" content="/essential/javascript/anonymous-function-7d18f92f1f9c4ede823374c1812ebea1" />
  
  <meta property="og:description" content="Anonymous Function">
  <meta property="og:image" content="/essential/javascript/covers/twitter/JavaScript.png">

  <title>Functions / Anonymous Function / Essential Javascript</title>
  <meta name="description" content="Functions / Anonymous Function / Essential Javascript">

  <link rel="icon" href="s/favicon-9dfe2f70.ico">

  <link href="s/main-65ff0b86.css" rel="stylesheet">
  <link href="s/bundle-83cf4538.css" rel="stylesheet">

  
  <script src="s/app-javascript-2f84e80f.js" defer></script>
  <script src="s/bundle-fd6a7ad6.js" defer></script>
</head>

<body class="page">
  <script>
  function onLoad() {
    gBookTitle = "Essential Javascript";

    httpsMaybeRedirect();

    let opts = {
      target: document.getElementById("toc"),
      props: {
        parentIdx: -1,
        level: 0,
      },
    };
    new app.toc(opts);

    opts = {
      target: document.getElementById("search-parent"),
      props: {
        bookTitle: gBookTitle,
      },
    };
    new app.searchInput(opts);

    opts = {
      target: document.getElementById("page-toc"),
    };
    new app.pageToc(opts);

    opts = {
      target: document.getElementById("book-toc"),
    };
    new app.bookToc(opts);
  }
  document.addEventListener('DOMContentLoaded', onLoad);
</script>
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none">
  <symbol id="arrow-expanded" viewbox="0 0 16 16">
    <path fill="%23646465" d="M11 10H5.344L11 4.414V10z" />
  </symbol>

  <symbol id="arrow-not-expanded" viewbox="0 0 16 16">
    <path fill="%23646465" d="M6 4v8l4-4-4-4zm1 2.414L8.586 8 7 9.586V6.414z" />
  </symbol>

  <symbol id="icon-github" viewbox="0 0 496 512">
    <path
      d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z" />
  </symbol>

  <symbol id="icon-home" viewbox="0 0 576 512">
    <path
      d="M488 312.7V456c0 13.3-10.7 24-24 24H348c-6.6 0-12-5.4-12-12V356c0-6.6-5.4-12-12-12h-72c-6.6 0-12 5.4-12 12v112c0 6.6-5.4 12-12 12H112c-13.3 0-24-10.7-24-24V312.7c0-3.6 1.6-7 4.4-9.3l188-154.8c4.4-3.6 10.8-3.6 15.3 0l188 154.8c2.7 2.3 4.3 5.7 4.3 9.3zm83.6-60.9L488 182.9V44.4c0-6.6-5.4-12-12-12h-56c-6.6 0-12 5.4-12 12V117l-89.5-73.7c-17.7-14.6-43.3-14.6-61 0L4.4 251.8c-5.1 4.2-5.8 11.8-1.6 16.9l25.5 31c4.2 5.1 11.8 5.8 16.9 1.6l235.2-193.7c4.4-3.6 10.8-3.6 15.3 0l235.2 193.7c5.1 4.2 12.7 3.5 16.9-1.6l25.5-31c4.2-5.2 3.4-12.7-1.7-16.9z" />
  </symbol>

  <symbol id="icon-twitter" viewbox="0 0 512 512">
    <path
      d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z" />
  </symbol>

  <symbol id="icon-edit" viewbox="0 0 576 512">
    <path
      d="M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z" />
  </symbol>

  <symbol id="icon-star" viewbox="0 0 576 512">
    <path
      d="M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z" />
  </symbol>
</svg>
  <header class="page__header">
  <div class="page__header__left">
    <a id="link-home" href="index.html">
      <svg class="icon-home">
        <use xlink:href="#icon-home"></use>
      </svg>
      &nbsp;Essential Javascript</a>
  </div>
  <div class="page__header__center" id="search-parent">
  </div>
  <div class="page__header__right">
  </div>
</header>

  <div id="toc"></div>

  <div class="content">
    <div class="article">
      

<div style="display: flex; justify-content: space-between">
  <h1 class="title">Anonymous Function</h1>
  <a class="edit-link" style="font-size: 80%" href="https://notion.so/7d18f92f1f9c4ede823374c1812ebea1" rel="nofollow"
  target="_blank">suggest change</a>
</div>


      <h1 id="e717528e-7b3b-436b-8aba-db088c47babe" class="">Defining an Anonymous Function<a class="header-anchor" href="#e717528e-7b3b-436b-8aba-db088c47babe" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a></h1><p>When a function is defined, you often give it a name and then invoke it using that name, like so:</p>
<div class="code-box lang-JavaScript">
	<div>
	<pre class="chroma"><span class="nx">foo</span><span class="p">();</span>

<span class="kd">function</span> <span class="nx">foo</span><span class="p">(){</span>
    <span class="c1">// ...
</span><span class="c1"></span><span class="p">}</span>
</pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p>When you define a function this way, the Javascript runtime stores your function in memory and then creates a reference to that function, using the name you’ve assigned it. That name is then accessible within the current scope. This can be a very convenient way to create a function, but Javascript does not require you to assign a name to a function. The following is also perfectly legal:</p>
<div class="code-box lang-JavaScript">
	<div>
	<pre class="chroma"><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ...
</span><span class="c1"></span><span class="p">}</span>
</pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p>When a function is defined without a name, it’s known as an anonymous function. The function is stored in memory, but the runtime doesn’t automatically create a reference to it for you. At first glance, it may appear as if such a thing would have no use, but there are several scenarios where anonymous functions are very convenient.</p><h1 id="2ba3538f-ce9b-480c-93fc-ccc32654aba3" class="">Assigning an Anonymous Function to a Variable<a class="header-anchor" href="#2ba3538f-ce9b-480c-93fc-ccc32654aba3" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a></h1><p>A very common use of anonymous functions is to assign them to a variable:</p>
<div class="code-box lang-JavaScript">
	<div>
	<pre class="chroma"><span class="kd">var</span> <span class="nx">foo</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span> <span class="cm">/*...*/</span> <span class="p">};</span>

<span class="nx">foo</span><span class="p">();</span>
</pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p>This use of anonymous functions is covered in more detail in <a href="http://stackoverflow.com/documentation/javascript/186/functions/716/functions-as-a-variable#t=20160817162538432807">http://stackoverflow.com/documentation/javascript/186/functions/716/functions-as-a-variable#t=20160817162538432807</a> </p><h1 id="2f69f170-c63b-4aeb-a110-01cb0554c7c3" class="">Supplying an Anonymous Function as a Parameter to Another Function<a class="header-anchor" href="#2f69f170-c63b-4aeb-a110-01cb0554c7c3" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a></h1><p>Some functions may accept a reference to a function as a parameter. These are sometimes referred to as “dependency injections” or “callbacks”, because it allows the function your calling to “call back” to your code, giving you an opportunity to change the way the called function behaves. For example, the Array object’s map function allows you to iterate over each element of an array, then build a new array by applying a transform function to each element.</p>
<div class="code-box lang-JavaScript">
	<div>
	<pre class="chroma"><span class="kd">var</span> <span class="nx">nums</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">];</span>
<span class="kd">var</span> <span class="nx">doubledNums</span> <span class="o">=</span> <span class="nx">nums</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span> <span class="kd">function</span><span class="p">(</span><span class="nx">element</span><span class="p">){</span> <span class="k">return</span> <span class="nx">element</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span> <span class="p">}</span> <span class="p">);</span> <span class="c1">// [0,2,4]
</span></pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p>It would be tedious, sloppy and unnecessary to create a named function, which would clutter your scope with a function only needed in this one place and break the natural flow and reading of your code (a colleague would have to leave this code to find your function to understand what’s going on).</p><h1 id="5efa24b7-0cd9-4588-8ddd-5484febba83b" class="">Returning an Anonymous Function From Another Function<a class="header-anchor" href="#5efa24b7-0cd9-4588-8ddd-5484febba83b" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a></h1><p>Sometimes it’s useful to return a function as the result of another function. For example:</p>
<div class="code-box lang-JavaScript">
	<div>
	<pre class="chroma"><span class="kd">var</span> <span class="nx">hash</span> <span class="o">=</span> <span class="nx">getHashFunction</span><span class="p">(</span> <span class="s1">&#39;sha1&#39;</span> <span class="p">);</span>
<span class="kd">var</span> <span class="nx">hashValue</span> <span class="o">=</span> <span class="nx">hash</span><span class="p">(</span> <span class="s1">&#39;Secret Value&#39;</span> <span class="p">);</span>

<span class="kd">function</span> <span class="nx">getHashFunction</span><span class="p">(</span> <span class="nx">algorithm</span> <span class="p">){</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">algorithm</span> <span class="o">===</span> <span class="s1">&#39;sha1&#39;</span> <span class="p">)</span> <span class="k">return</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">value</span> <span class="p">){</span> <span class="cm">/*...*/</span> <span class="p">};</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">algorithm</span> <span class="o">===</span> <span class="s1">&#39;md5&#39;</span> <span class="p">)</span> <span class="k">return</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">value</span> <span class="p">){</span> <span class="cm">/*...*/</span> <span class="p">};</span>

<span class="p">}</span>
</pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><h1 id="38658e3e-2177-4b37-afd9-f5b579471a9c" class="">Immediately Invoking an Anonymous Function<a class="header-anchor" href="#38658e3e-2177-4b37-afd9-f5b579471a9c" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a></h1><p>Unlike many other languages, scoping in Javascript is function-level, not block-level. (See http://stackoverflow.com/documentation/javascript/186/functions/844/function-scoping#t=20160817162538432807 ). In some cases, however, it’s necessary to create a new scope. For example, it’s common to create a new scope when adding code via a <code>&lt;script&gt;</code> tag, rather than allowing variable names to be defined in the global scope (which runs the risk of other scripts colliding with your variable names). A common method to handle this situation is to define a new anonymous function and then immediately invoke it, safely hiding you variables within the scope of the anonymous function and without making your code accessible to third-parties via a leaked function name. For example:</p>
<div class="code-box lang-HTML">
	<div>
	<pre class="chroma"><span class="c">&lt;!-- My Script --&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="kd">function</span> <span class="nx">initialize</span><span class="p">(){</span>
    <span class="c1">// foo is safely hidden within initialize, but...
</span><span class="c1"></span>    <span class="kd">var</span> <span class="nx">foo</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// ...my initialize function is now accessible from global scope.
</span><span class="c1">// There&#39;s a risk someone could call it again, probably by accident.
</span><span class="c1"></span><span class="nx">initialize</span><span class="p">();</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="c1">// Using an anonymous function, and then immediately
</span><span class="c1">// invoking it, hides my foo variable and guarantees
</span><span class="c1">// no one else can call it a second time.
</span><span class="c1"></span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">foo</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="p">}())</span> <span class="c1">// &lt;--- the parentheses invokes the function immediately
</span><span class="c1"></span><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span></pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><h1 id="50d98943-b14c-4b36-975e-8543a9bf8963" class="">Self-Referential Anonymous Functions<a class="header-anchor" href="#50d98943-b14c-4b36-975e-8543a9bf8963" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><path d="M5.88.03c-.18.01-.36.03-.53.09-.27.1-.53.25-.75.47a.5.5 0 1 0 .69.69c.11-.11.24-.17.38-.22.35-.12.78-.07 1.06.22.39.39.39 1.04 0 1.44l-1.5 1.5c-.44.44-.8.48-1.06.47-.26-.01-.41-.13-.41-.13a.5.5 0 1 0-.5.88s.34.22.84.25c.5.03 1.2-.16 1.81-.78l1.5-1.5c.78-.78.78-2.04 0-2.81-.28-.28-.61-.45-.97-.53-.18-.04-.38-.04-.56-.03zm-2 2.31c-.5-.02-1.19.15-1.78.75l-1.5 1.5c-.78.78-.78 2.04 0 2.81.56.56 1.36.72 2.06.47.27-.1.53-.25.75-.47a.5.5 0 1 0-.69-.69c-.11.11-.24.17-.38.22-.35.12-.78.07-1.06-.22-.39-.39-.39-1.04 0-1.44l1.5-1.5c.4-.4.75-.45 1.03-.44.28.01.47.09.47.09a.5.5 0 1 0 .44-.88s-.34-.2-.84-.22z"></path></svg></a></h1><p>Sometimes it’s useful for an anonymous function to be able to refer to itself. For example, the function may need to recursively call itself or add properties to itself. If the function is anonymous, though, this can be very difficult as it requires knowledge of the variable that the function has been assigned to. This is the less than ideal solution:</p>
<div class="code-box lang-JavaScript">
	<div>
	<pre class="chroma"><span class="kd">var</span> <span class="nx">foo</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callAgain</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span> <span class="s1">&#39;Whassup?&#39;</span> <span class="p">);</span>
    <span class="c1">// Less then ideal... we&#39;re dependent on a variable reference...
</span><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="nx">callAgain</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span> <span class="nx">foo</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">foo</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>

<span class="c1">// Console Output:
</span><span class="c1">// Whassup?
</span><span class="c1">// Whassup?
</span><span class="c1"></span>
<span class="c1">// Assign bar to the original function, and assign foo to another function.
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">bar</span> <span class="o">=</span> <span class="nx">foo</span><span class="p">;</span>
<span class="nx">foo</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Bad.&#39;</span><span class="p">)</span>
<span class="p">};</span>

<span class="nx">bar</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>

<span class="c1">// Console Output:
</span><span class="c1">// Whassup?
</span><span class="c1">// Bad.
</span></pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p>The intent here was for the anonymous function to recursively call itself, but when the value of foo changes, you end up with a potentially difficult to trace bug.</p><p>Instead, we can give the anonymous function a reference to itself by giving it a private name, like so:</p>
<div class="code-box lang-JavaScript">
	<div>
	<pre class="chroma"><span class="kd">var</span> <span class="nx">foo</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">myself</span><span class="p">(</span><span class="nx">callAgain</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span> <span class="s1">&#39;Whassup?&#39;</span> <span class="p">);</span>
    <span class="c1">// Less then ideal... we&#39;re dependent on a variable reference...
</span><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="nx">callAgain</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span> <span class="nx">myself</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">foo</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>

<span class="c1">// Console Output:
</span><span class="c1">// Whassup?
</span><span class="c1">// Whassup?
</span><span class="c1"></span>
<span class="c1">// Assign bar to the original function, and assign foo to another function.
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">bar</span> <span class="o">=</span> <span class="nx">foo</span><span class="p">;</span>
<span class="nx">foo</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Bad.&#39;</span><span class="p">)</span>
<span class="p">};</span>

<span class="nx">bar</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>

<span class="c1">// Console Output:
</span><span class="c1">// Whassup?
</span><span class="c1">// Whassup?
</span></pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p>Note that the function name is scoped to itself. The name has not leaked into the outer scope:</p>
<div class="code-box lang-JavaScript">
	<div>
	<pre class="chroma"><span class="nx">myself</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span> <span class="c1">// ReferenceError: myself is not defined
</span></pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div><p>This technique is especially useful when dealing with recursive anonymous functions as callback parameters:</p>
<div class="code-box lang-JavaScript">
	<div>
	<pre class="chroma"><span class="c1">// Calculate the fibonacci value for each number in an array:
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">fib</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nx">result</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">].</span><span class="nx">map</span><span class="p">(</span>
        <span class="kd">function</span> <span class="nx">fib</span><span class="p">(</span><span class="nx">n</span><span class="p">){</span>
            <span class="k">return</span> <span class="p">(</span> <span class="nx">n</span> <span class="o">&lt;=</span> <span class="mi">2</span> <span class="p">)</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="nx">fib</span><span class="p">(</span> <span class="nx">n</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">+</span> <span class="nx">fib</span><span class="p">(</span> <span class="nx">n</span> <span class="o">-</span> <span class="mi">2</span> <span class="p">);</span>
        <span class="p">});</span>
<span class="c1">// result = [1, 1, 2, 3, 5, 8, 13, 21]
</span><span class="c1">// fib = false (the anonymous function name did not overwrite our fib variable)
</span></pre>
	</div>
	<div class="code-box-nav">
		
	</div>
</div>

      <div class="forum-link">
  Found a mistake? Have a question or improvement idea?
  <a href="#" onclick="showContact(); return false;">Let me know</a>.
</div>

      <form id="contact-form" action="https://formsubmit.co/kkowalczyk@gmail.com" method="POST">
  <p>
    <div class="contact-light">Feedback about page:</div>
    <input type="text" name="page-url" id="contact-page-url" readonly />
  </p>

  <p>
    <div class="contact-light">Feedback:</div>
    <textarea name="message" id="msg-for-chris"></textarea>
    <div class="contact-light">Optional: your email if you want me to get back to you: </div>
    <input type="email" name="email" />
    <input type="text" name="_honey" style="display:none">
  </p>

  <p>
    <button type="submit" class="contact-btn">
      Send Feedback
    </button>

    <button class="contact-btn" style="float: right;" onclick="hideContact(); return false;">
      Cancel
    </button>
  </p>

  <p>
    <div data-netlify-recaptcha></div>
  </p>
</form>


      <hr class="article-bottom-sep">
    </div>

    <div id="page-toc"></div>

    <div id="chapter-toc-wrapper">
      <hr />
      <div class="hdr">Table Of Contents</div>
      <div id="book-toc"></div>
    </div>
  </div>

  <footer class="page__footer">
  <div class="page__footer__left">
    Maintained by
    <a href="https://blog.kowalczyk.info" target="_blank">Krzysztof Kowalczyk</a>
  </div>
  <div class="share-me">
    <a href="https://twitter.com/intent/tweet?text=%22Essential%20Javascript%22%20-%20a%20free%20programming%20book&url=%2fessential%2fjavascript%2f&via=kjk">Share
      <b>Essential Javascript</b> on&nbsp;
      <svg class="icon-twitter">
        <use xlink:href="#icon-twitter"></use>
      </svg>
    </a>
  </div>
  <div class="page__footer__right">
    
  </div>
</footer>

  

</body>

</html>